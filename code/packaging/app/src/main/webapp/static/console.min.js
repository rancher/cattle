var NoVNC=function(e){function t(){"use strict";function t(){return F}function r(){return M}function n(){return A}function o(e){A=e}function i(){return M.length-A}function s(){return M[A]}function a(){return M[A++]}function u(e){0===A?M.unshift(e):(A-=1,M[A]=e)}function c(){return(M[A++]<<8)+M[A++]}function l(){return(M[A++]<<24)+(M[A++]<<16)+(M[A++]<<8)+M[A++]}function f(e){"undefined"==typeof e&&(e=i());var t=M.slice(A,A+e);return A+=e,String.fromCharCode.apply(null,t)}function d(e){return"undefined"==typeof e&&(e=i()),A+=e,M.slice(A-e,A)}function h(e,t){return t?M.slice(A+e,A+t):M.slice(A+e)}function p(e,t,r){var n=M.length-A;if(t>n){if(r){if(r>A)throw"rQwait cannot backup "+r+" bytes";A-=r}return!0}return!1}function b(){return"binary"===R?new Uint8Array(F).buffer:g.encode(F)}function m(e){if("binary"===R)for(var t=new Uint8Array(e),r=0;r<t.length;r++)M.push(t[r]);else M=M.concat(g.decode(e,0))}function v(){return 0!==D.bufferedAmount&&y.Debug("bufferedAmount: "+D.bufferedAmount),D.bufferedAmount<T.maxBufferedAmount?(F.length>0&&(D.send(b(F)),F=[]),!0):(y.Info("Delaying send, bufferedAmount: "+D.bufferedAmount),!1)}function w(e){return F=F.concat(e),v()}function _(e){T.send(e.split("").map(function(e){return e.charCodeAt(0)}))}function k(e){try{m(e.data),i()>0?(W.message(),M.length>B&&(M=M.slice(A),A=0)):y.Debug("Ignoring empty message")}catch(t){y.Warn("undefined"!=typeof t.stack?"recv_message, caught exception: "+t.stack:"undefined"!=typeof t.description?"recv_message, caught exception: "+t.description:"recv_message, caught exception:"+t),W.error("undefined"!=typeof t.name?t.name+": "+t.message:t)}}function x(e,t){W[e]=t}function E(t){M=[],A=0,F=[],D=null;var r=!1,n=!1;"Uint8Array"in e&&"set"in Uint8Array.prototype&&(r=!0);try{r&&"binaryType"in new WebSocket("ws://localhost:17523")&&(y.Info("Detected binaryType support in WebSockets"),n=!0)}catch(o){}if("undefined"==typeof t&&(t=n?["binary","base64"]:"base64"),!n){if("binary"===t)throw"WebSocket binary sub-protocol requested but not supported";if("object"==typeof t){for(var i=[],s=0;s<t.length;s++)"binary"===t[s]?y.Error("Skipping unsupported WebSocket binary sub-protocol"):i.push(t[s]);if(!(i.length>0))throw"Only WebSocket binary sub-protocol was requested and not supported.";t=i}}return t}function S(e,t){t=E(t),O?D={}:(D=new WebSocket(e,t),t.indexOf("binary")>=0&&(D.binaryType="arraybuffer")),D.onmessage=k,D.onopen=function(){y.Debug(">> WebSock.onopen"),D.protocol?(R=D.protocol,y.Info("Server chose sub-protocol: "+D.protocol)):(R="base64",y.Error("Server select no sub-protocol!: "+D.protocol)),W.open(),y.Debug("<< WebSock.onopen")},D.onclose=function(e){y.Debug(">> WebSock.onclose"),W.close(e),y.Debug("<< WebSock.onclose")},D.onerror=function(e){y.Debug(">> WebSock.onerror: "+e),W.error(e),y.Debug("<< WebSock.onerror")}}function I(){D&&((D.readyState===WebSocket.OPEN||D.readyState===WebSocket.CONNECTING)&&(y.Info("Closing WebSocket connection"),D.close()),D.onmessage=function(){})}function Q(e,t){return O=!0,R=t,T.send=e,T.close=function(){},k}function C(){return T.maxBufferedAmount=200,T.get_sQ=t,T.get_rQ=r,T.get_rQi=n,T.set_rQi=o,T.rQlen=i,T.rQpeek8=s,T.rQshift8=a,T.rQunshift8=u,T.rQshift16=c,T.rQshift32=l,T.rQshiftStr=f,T.rQshiftBytes=d,T.rQslice=h,T.rQwait=p,T.flush=v,T.send=w,T.send_string=_,T.on=x,T.init=E,T.open=S,T.close=I,T.testMode=Q,T}var T={},D=null,R="base64",M=[],A=0,B=1e4,F=[],W={message:function(){},open:function(){},close:function(){},error:function(){}},O=!1;return C()}function r(e){function t(e){var t,r,n,o,i,s,a,u,c,l,f=[],d=[],h=[];for(r=0,n=56;56>r;++r,n-=8)n+=-5>n?65:-3>n?31:-1>n?63:27===n?35:0,o=7&n,f[r]=0!==(e[n>>>3]&1<<o)?1:0;for(t=0;16>t;++t){for(o=t<<1,i=o+1,h[o]=h[i]=0,s=28;59>s;s+=28)for(r=s-28;s>r;++r)n=r+v[t],d[r]=s>n?f[n]:f[n-28];for(r=0;24>r;++r)0!==d[m[r]]&&(h[o]|=1<<23-r),0!==d[m[r+24]]&&(h[i]|=1<<23-r)}for(t=0,c=0,l=0;16>t;++t)a=h[c++],u=h[c++],_[l]=(16515072&a)<<6,_[l]|=(4032&a)<<10,_[l]|=(16515072&u)>>>10,_[l]|=(4032&u)>>>6,++l,_[l]=(258048&a)<<12,_[l]|=(63&a)<<16,_[l]|=(258048&u)>>>4,_[l]|=63&u,++l}function r(e){var t,r,n,o,i=0,s=e.slice(),a=0;for(r=s[i++]<<24|s[i++]<<16|s[i++]<<8|s[i++],n=s[i++]<<24|s[i++]<<16|s[i++]<<8|s[i++],o=252645135&(r>>>4^n),n^=o,r^=o<<4,o=65535&(r>>>16^n),n^=o,r^=o<<16,o=858993459&(n>>>2^r),r^=o,n^=o<<2,o=16711935&(n>>>8^r),r^=o,n^=o<<8,n=n<<1|n>>>31&1,o=2863311530&(r^n),r^=o,n^=o,r=r<<1|r>>>31&1,i=0;8>i;++i)o=n<<28|n>>>4,o^=_[a++],t=g[63&o],t|=y[o>>>8&63],t|=d[o>>>16&63],t|=l[o>>>24&63],o=n^_[a++],t|=b[63&o],t|=p[o>>>8&63],t|=h[o>>>16&63],t|=f[o>>>24&63],r^=t,o=r<<28|r>>>4,o^=_[a++],t=g[63&o],t|=y[o>>>8&63],t|=d[o>>>16&63],t|=l[o>>>24&63],o=r^_[a++],t|=b[63&o],t|=p[o>>>8&63],t|=h[o>>>16&63],t|=f[o>>>24&63],n^=t;for(n=n<<31|n>>>1,o=2863311530&(r^n),r^=o,n^=o,r=r<<31|r>>>1,o=16711935&(r>>>8^n),n^=o,r^=o<<8,o=858993459&(r>>>2^n),n^=o,r^=o<<2,o=65535&(n>>>16^r),r^=o,n^=o<<16,o=252645135&(n>>>4^r),r^=o,n^=o<<4,o=[n,r],i=0;8>i;i++)s[i]=(o[i>>>2]>>>8*(3-i%4))%256,s[i]<0&&(s[i]+=256);return s}function n(e){return r(e.slice(0,8)).concat(r(e.slice(8,16)))}var o,i,s,a,u,c,l,f,d,h,y,p,g,b,m=[13,16,10,23,0,4,2,27,14,5,20,9,22,18,11,3,25,7,15,6,26,19,12,1,40,51,30,36,46,54,29,39,50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],w=0,_=[];return o=65536,i=1<<24,s=o|i,a=4,u=1024,c=a|u,l=[s|u,w|w,o|w,s|c,s|a,o|c,w|a,o|w,w|u,s|u,s|c,w|u,i|c,s|a,i|w,w|a,w|c,i|u,i|u,o|u,o|u,s|w,s|w,i|c,o|a,i|a,i|a,o|a,w|w,w|c,o|c,i|w,o|w,s|c,w|a,s|w,s|u,i|w,i|w,w|u,s|a,o|w,o|u,i|a,w|u,w|a,i|c,o|c,s|c,o|a,s|w,i|c,i|a,w|c,o|c,s|u,w|c,i|u,i|u,w|w,o|a,o|u,w|w,s|a],o=1<<20,i=1<<31,s=o|i,a=32,u=32768,c=a|u,f=[s|c,i|u,w|u,o|c,o|w,w|a,s|a,i|c,i|a,s|c,s|u,i|w,i|u,o|w,w|a,s|a,o|u,o|a,i|c,w|w,i|w,w|u,o|c,s|w,o|a,i|a,w|w,o|u,w|c,s|u,s|w,w|c,w|w,o|c,s|a,o|w,i|c,s|w,s|u,w|u,s|w,i|u,w|a,s|c,o|c,w|a,w|u,i|w,w|c,s|u,o|w,i|a,o|a,i|c,i|a,o|a,o|u,w|w,i|u,w|c,i|w,s|a,s|c,o|u],o=1<<17,i=1<<27,s=o|i,a=8,u=512,c=a|u,d=[w|c,s|u,w|w,s|a,i|u,w|w,o|c,i|u,o|a,i|a,i|a,o|w,s|c,o|a,s|w,w|c,i|w,w|a,s|u,w|u,o|u,s|w,s|a,o|c,i|c,o|u,o|w,i|c,w|a,s|c,w|u,i|w,s|u,i|w,o|a,w|c,o|w,s|u,i|u,w|w,w|u,o|a,s|c,i|u,i|a,w|u,w|w,s|a,i|c,o|w,i|w,s|c,w|a,o|c,o|u,i|a,s|w,i|c,w|c,s|w,o|c,w|a,s|a,o|u],o=8192,i=1<<23,s=o|i,a=1,u=128,c=a|u,h=[s|a,o|c,o|c,w|u,s|u,i|c,i|a,o|a,w|w,s|w,s|w,s|c,w|c,w|w,i|u,i|a,w|a,o|w,i|w,s|a,w|u,i|w,o|a,o|u,i|c,w|a,o|u,i|u,o|w,s|u,s|c,w|c,i|u,i|a,s|w,s|c,w|c,w|w,w|w,s|w,o|u,i|u,i|c,w|a,s|a,o|c,o|c,w|u,s|c,w|c,w|a,o|w,i|a,o|a,s|u,i|c,o|a,o|u,i|w,s|a,w|u,i|w,o|w,s|u],o=1<<25,i=1<<30,s=o|i,a=256,u=1<<19,c=a|u,y=[w|a,o|c,o|u,s|a,w|u,w|a,i|w,o|u,i|c,w|u,o|a,i|c,s|a,s|u,w|c,i|w,o|w,i|u,i|u,w|w,i|a,s|c,s|c,o|a,s|u,i|a,w|w,s|w,o|c,o|w,s|w,w|c,w|u,s|a,w|a,o|w,i|w,o|u,s|a,i|c,o|a,i|w,s|u,o|c,i|c,w|a,o|w,s|u,s|c,w|c,s|w,s|c,o|u,w|w,i|u,s|w,w|c,o|a,i|a,w|u,w|w,i|u,o|c,i|a],o=1<<22,i=1<<29,s=o|i,a=16,u=16384,c=a|u,p=[i|a,s|w,w|u,s|c,s|w,w|a,s|c,o|w,i|u,o|c,o|w,i|a,o|a,i|u,i|w,w|c,w|w,o|a,i|c,w|u,o|u,i|c,w|a,s|a,s|a,w|w,o|c,s|u,w|c,o|u,s|u,i|w,i|u,w|a,s|a,o|u,s|c,o|w,w|c,i|a,o|w,i|u,i|w,w|c,i|a,s|c,o|u,s|w,o|c,s|u,w|w,s|a,w|a,w|u,s|w,o|c,w|u,o|a,i|c,w|w,s|u,i|w,o|a,i|c],o=1<<21,i=1<<26,s=o|i,a=2,u=2048,c=a|u,g=[o|w,s|a,i|c,w|w,w|u,i|c,o|c,s|u,s|c,o|w,w|w,i|a,w|a,i|w,s|a,w|c,i|u,o|c,o|a,i|u,i|a,s|w,s|u,o|a,s|w,w|u,w|c,s|c,o|u,w|a,i|w,o|u,i|w,o|u,o|w,i|c,i|c,s|a,s|a,w|a,o|a,i|w,i|u,o|w,s|u,w|c,o|c,s|u,w|c,i|a,s|c,s|w,o|u,w|w,w|a,s|c,w|w,o|c,s|w,w|u,i|a,i|u,w|u,o|a],o=1<<18,i=1<<28,s=o|i,a=64,u=4096,c=a|u,b=[i|c,w|u,o|w,s|c,i|w,i|c,w|a,i|w,o|a,s|w,s|c,o|u,s|u,o|c,w|u,w|a,s|w,i|a,i|u,w|c,o|u,o|a,s|a,s|u,w|c,w|w,w|w,s|a,i|a,i|u,o|c,o|w,o|c,o|w,s|u,w|u,w|a,s|a,w|u,o|c,i|u,w|a,i|a,s|w,s|a,i|w,o|w,i|c,w|w,s|c,o|a,i|a,s|w,i|u,i|c,w|w,s|c,o|u,o|u,w|c,w|c,o|a,i|w,s|u],t(e),{encrypt:n}}function n(e,t){"use strict";function r(e){for(var r=0;r<e.length;++r)t(e[r])}function n(r,n){var o={type:n},i=m.getKey(r);i&&(o.keyId=i);var s=m.getKeysym(r),a=e.hasShortcutModifier()||!!e.activeCharModifier();s&&("keydown"!==n||m.nonCharacterKey(r)||a)&&(o.keysym=s);var u=16===r.keyCode||"Shift"===r.key,c=!u&&("keydown"!==n||e.hasShortcutModifier()||!!m.nonCharacterKey(r)),l="keydown"===n&&e.activeCharModifier()&&!m.nonCharacterKey(r),f=e.activeCharModifier();if(f&&s){for(var d=!1,h=0;h<f.length;++h)f[h]===s.keysym&&(d=!0);"keypress"!==n||d||(o.escape=e.activeCharModifier())}return l&&t({type:"stall"}),t(o),c}return{keydown:function(t){return r(e.keydown(t)),n(t,"keydown")},keypress:function(e){return n(e,"keypress")},keyup:function(t){return r(e.keyup(t)),n(t,"keyup")},syncModifiers:function(t){r(e.syncAny(t))},releaseAll:function(){t({type:"releaseall"})}}}function o(e){"use strict";function t(){if(!n)for(;0!==r.length;){var o=r[0];switch(r=r.splice(1),o.type){case"stall":return void(n=setTimeout(function(){clearTimeout(n),n=null,t()},5));case"keydown":0!==r.length&&"keypress"===r[0].type&&(!r[0].escape||o.keysym&&o.keysym.keysym===r[0].keysym.keysym||(o.escape=r[0].escape),o.keysym=r[0].keysym,r=r.splice(1))}"stall"!==o.type&&e(o)}}var r=[],n=null;return function(e){r.push(e),t()}}function i(e){"use strict";var t=[];return function(r){var n=0!==t.length?t[t.length-1]:null;switch(r.type){case"keydown":n&&r.keyId&&n.keyId===r.keyId||(n={keyId:r.keyId,keysyms:{}},t.push(n)),r.keysym&&(n.keysyms[r.keysym.keysym]=r.keysym,n.ignoreKeyPress=!0,e(r));break;case"keypress":n||(n={keyId:r.keyId,keysyms:{}},t.push(n)),r.keysym||console.log("keypress with no keysym:",r),r.keysym&&!n.ignoreKeyPress&&(n.keysyms[r.keysym.keysym]=r.keysym,r.type="keydown",e(r));break;case"keyup":if(0===t.length)return;for(var o=null,i=0;i!==t.length;++i)if(t[i].keyId===r.keyId){o=i;break}null===o&&(o=t.length-1);var s=t.splice(o,1)[0];for(var a in s.keysyms){var u=function(){function e(){}return function(t){return e.prototype=t,new e}}(),c=u(r);c.keysym=s.keysyms[a],e(c)}break;case"releaseall":for(var i=0;i<t.length;++i)for(var a in t[i].keysyms){var l=t[i].keysyms[a];e({keyId:0,keysym:l,type:"keyup"})}t=[]}}}function s(e){"use strict";return function(t){if("keydown"!==t.type||void 0===t.escape)return void e(t);for(var r=0;r<t.escape.length;++r)e({type:"keyup",keyId:0,keysym:b.lookup(t.escape[r])});e(t);for(var r=0;r<t.escape.length;++r)e({type:"keydown",keyId:0,keysym:b.lookup(t.escape[r])})}}function a(t){"use strict";function r(e){d.onKeyPress&&(y.Debug("onKeyPress "+("keydown"==e.type?"down":"up")+", keysym: "+e.keysym.keysym+"("+e.keysym.keyname+")"),d.onKeyPress(e.keysym.keysym,"keydown"==e.type))}function a(e){return d.focused&&h.keydown(e)?(y.stopEvent(e),!1):!0}function u(e){return d.focused&&h.keypress(e)?(y.stopEvent(e),!1):!0}function c(e){return d.focused&&h.keyup(e)?(y.stopEvent(e),!1):!0}function l(){y.Debug(">> Keyboard.allKeysUp"),h.releaseAll(),y.Debug("<< Keyboard.allKeysUp")}var f={},d={};y.conf_defaults(d,f,t,[["target","wo","dom",document,"DOM element that captures keyboard input"],["focused","rw","bool",!0,"Capture and send key events"],["onKeyPress","rw","func",null,"Handler for key press/release"]]);var h=n(m.ModifierSync(),o(i(s(r))));return f.grab=function(){var t=d.target;y.addEvent(t,"keydown",a),y.addEvent(t,"keyup",c),y.addEvent(t,"keypress",u),y.addEvent(e,"blur",l)},f.ungrab=function(){var t=d.target;y.removeEvent(t,"keydown",a),y.removeEvent(t,"keyup",c),y.removeEvent(t,"keypress",u),y.removeEvent(e,"blur",l),l()},f.sync=function(e){h.syncModifiers(e)},f}function u(t){"use strict";function r(){d.target.setCapture&&d.target.setCapture(),h=!0}function n(){d.target.releaseCapture&&d.target.releaseCapture(),h=!1}function o(){p=null}function i(t,r){var n,i,s;if(!d.focused)return!0;if(d.notify&&d.notify(t),n=t?t:e.event,i=y.getEventPosition(t,d.target,d.scale),t.touches||t.changedTouches){if(1==r){if(null==p)g=i;else{clearTimeout(p);var a=g.x-i.x,u=g.y-i.y,c=Math.sqrt(a*a+u*u);c<20*e.devicePixelRatio&&(i=g)}p=setTimeout(o,500)}s=d.touchButton}else s=n.which?1<<n.button:(1&n.button)+2*(2&n.button)+(4&n.button)/2;return d.onMouseButton&&(y.Debug("onMouseButton "+(r?"down":"up")+", x: "+i.x+", y: "+i.y+", bmask: "+s),d.onMouseButton(i.x,i.y,r,s)),y.stopEvent(t),!1}function s(e){r(),i(e,1)}function a(e){h&&(i(e,0),n())}function u(t){var r,n,o,i;return d.focused?(d.notify&&d.notify(t),r=t?t:e.event,n=y.getEventPosition(t,d.target,d.scale),i=r.detail?-1*r.detail:r.wheelDelta/40,o=i>0?8:16,d.onMouseButton&&(d.onMouseButton(n.x,n.y,1,o),d.onMouseButton(n.x,n.y,0,o)),y.stopEvent(t),!1):!0}function c(t){var r,n;return d.focused?(d.notify&&d.notify(t),r=t?t:e.event,n=y.getEventPosition(t,d.target,d.scale),d.onMouseMove&&d.onMouseMove(n.x,n.y),y.stopEvent(t),!1):!0}function l(t){var r,n;return d.focused?(r=t?t:e.event,n=y.getEventPosition(t,d.target,d.scale),n.realx>=0&&n.realy>=0&&n.realx<d.target.offsetWidth&&n.realy<d.target.offsetHeight?(y.stopEvent(t),!1):!0):!0}var f={},d={},h=!1,p=null,g=null;return y.conf_defaults(d,f,t,[["target","ro","dom",document,"DOM element that captures mouse input"],["notify","ro","func",null,"Function to call to notify whenever a mouse event is received"],["focused","rw","bool",!0,"Capture and send mouse clicks/movement"],["scale","rw","float",1,"Viewport scale factor 0.0 - 1.0"],["onMouseButton","rw","func",null,"Handler for mouse button click/release"],["onMouseMove","rw","func",null,"Handler for mouse movement"],["touchButton","rw","int",1,"Button mask (1, 2, 4) for touch devices (0 means ignore clicks)"]]),f.grab=function(){var t=d.target;"ontouchstart"in document.documentElement?(y.addEvent(t,"touchstart",s),y.addEvent(e,"touchend",a),y.addEvent(t,"touchend",a),y.addEvent(t,"touchmove",c)):(y.addEvent(t,"mousedown",s),y.addEvent(e,"mouseup",a),y.addEvent(t,"mouseup",a),y.addEvent(t,"mousemove",c),y.addEvent(t,y.Engine.gecko?"DOMMouseScroll":"mousewheel",u)),y.addEvent(document,"click",l),y.addEvent(document.body,"contextmenu",l)},f.ungrab=function(){var t=d.target;"ontouchstart"in document.documentElement?(y.removeEvent(t,"touchstart",s),y.removeEvent(e,"touchend",a),y.removeEvent(t,"touchend",a),y.removeEvent(t,"touchmove",c)):(y.removeEvent(t,"mousedown",s),y.removeEvent(e,"mouseup",a),y.removeEvent(t,"mouseup",a),y.removeEvent(t,"mousemove",c),y.removeEvent(t,y.Engine.gecko?"DOMMouseScroll":"mousewheel",u)),y.removeEvent(document,"click",l),y.removeEvent(document.body,"contextmenu",l)},f}function c(e){"use strict";function t(){y.Debug(">> Display.constructor");var e,t,r,n,o=y.Engine;if(!c.target)throw"target must be set";if("string"==typeof c.target)throw"target must be a DOM element";if(e=c.target,!e.getContext)throw"no getContext method";if(f||(f=e.getContext("2d")),y.Debug("User Agent: "+navigator.userAgent),o.gecko&&y.Debug("Browser: gecko "+o.gecko),o.webkit&&y.Debug("Browser: webkit "+o.webkit),o.trident&&y.Debug("Browser: trident "+o.trident),o.presto&&y.Debug("Browser: presto "+o.presto),u.clear(),!("createImageData"in f))throw"Canvas does not support createImageData";for(c.render_mode="canvas rendering",null===c.prefer_js&&(y.Info("Prefering javascript operations"),c.prefer_js=!0),w=f.createImageData(16,16),r=[],t=0;256>t;t+=1)r.push(255);try{n=e.style.cursor,l(c.target,r,r,2,2,8,8),e.style.cursor?(null===c.cursor_uri&&(c.cursor_uri=!0),y.Info("Data URI scheme cursor supported")):(null===c.cursor_uri&&(c.cursor_uri=!1),y.Warn("Data URI scheme cursor not supported")),e.style.cursor=n}catch(i){y.Error("Data URI scheme cursor test exception: "+i),c.cursor_uri=!1}return y.Debug("<< Display.constructor"),u}var r,n,o,i,s,a,u={},c={},f=null,d=[],h=0,p=0,g={x:0,y:0,w:0,h:0},b={x1:0,y1:0,x2:-1,y2:-1},m="",v=null,w=null,_=0,k=0;return y.conf_defaults(c,u,e,[["target","wo","dom",null,"Canvas element for rendering"],["context","ro","raw",null,"Canvas 2D context for rendering (read-only)"],["logo","rw","raw",null,'Logo to display when cleared: {"width": width, "height": height, "data": data}'],["true_color","rw","bool",!0,"Use true-color pixel data"],["colourMap","rw","arr",[],"Colour map array (when not true-color)"],["scale","rw","float",1,"Display area scale factor 0.0 - 1.0"],["viewport","rw","bool",!1,"Use a viewport set with viewportChange()"],["width","rw","int",null,"Display area width"],["height","rw","int",null,"Display area height"],["render_mode","ro","str","","Canvas rendering mode (read-only)"],["prefer_js","rw","str",null,"Prefer Javascript over canvas methods"],["cursor_uri","rw","raw",null,"Can we render cursor using data URI"]]),u.get_context=function(){return f},u.set_scale=function(e){s(e)},u.set_width=function(e){u.resize(e,p)},u.get_width=function(){return h},u.set_height=function(e){u.resize(h,e)},u.get_height=function(){return p},s=function(e){var t,r,n,o,i=["transform","WebkitTransform","MozTransform",null];for(t=c.target,r=i.shift();r&&"undefined"==typeof t.style[r];)r=i.shift();return null===r?void y.Debug("No scaling support"):("undefined"==typeof e?e=c.scale:e>1?e=1:.1>e&&(e=.1),void(c.scale!==e&&(c.scale=e,n=t.width-t.width*e,o=t.height-t.height*e,t.style[r]="scale("+c.scale+") translate(-"+n+"px, -"+o+"px)")))},i=function(e){var t,r;t=c.true_color?e:c.colourMap[e[0]],r="rgb("+t[2]+","+t[1]+","+t[0]+")",r!==m&&(f.fillStyle=r,m=r)},u.viewportChange=function(e,t,r,n){var o,i,s,a,u,l,d,m=c.target,v=g,w=b,_=null;c.viewport||(y.Debug("Setting viewport to full display region"),e=-v.w,t=-v.h,r=h,n=p),"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=v.w),"undefined"==typeof n&&(n=v.h),r>h&&(r=h),n>p&&(n=p),(v.w!==r||v.h!==n)&&(r<v.w&&w.x2>v.x+r-1&&(w.x2=v.x+r-1),v.w=r,n<v.h&&w.y2>v.y+n-1&&(w.y2=v.y+n-1),v.h=n,v.w>0&&v.h>0&&m.width>0&&m.height>0&&(_=f.getImageData(0,0,m.width<v.w?m.width:v.w,m.height<v.h?m.height:v.h)),m.width=v.w,m.height=v.h,_&&f.putImageData(_,0,0)),a=v.x+v.w-1,u=v.y+v.h-1,0>e&&v.x+e<0&&(e=-v.x),a+e>=h&&(e-=a+e-h+1),v.y+t<0&&(t=-v.y),u+t>=p&&(t-=u+t-p+1),(0!==e||0!==t)&&(y.Debug("viewportChange deltaX: "+e+", deltaY: "+t),v.x+=e,a+=e,v.y+=t,u+=t,v.x>w.x1&&(w.x1=v.x),a<w.x2&&(w.x2=a),v.y>w.y1&&(w.y1=v.y),u<w.y2&&(w.y2=u),0>e?(i=0,l=-e):(i=v.w-e,l=e),0>t?(s=0,d=-t):(s=v.h-t,d=t),o=f.fillStyle,f.fillStyle="rgb(255,255,255)",0!==e&&(f.drawImage(m,0,0,v.w,v.h,-e,0,v.w,v.h),f.fillRect(i,0,l,v.h)),0!==t&&(f.drawImage(m,0,0,v.w,v.h,0,-t,v.w,v.h),f.fillRect(0,s,v.w,d)),f.fillStyle=o)},u.getCleanDirtyReset=function(){var e,t=g,r=b,n=[],o=t.x+t.w-1,i=t.y+t.h-1;return e={x:r.x1,y:r.y1,w:r.x2-r.x1+1,h:r.y2-r.y1+1},r.x1>=r.x2||r.y1>=r.y2?n.push({x:t.x,y:t.y,w:t.w,h:t.h}):(t.x<r.x1&&n.push({x:t.x,y:t.y,w:r.x1-t.x+1,h:t.h}),o>r.x2&&n.push({x:r.x2+1,y:t.y,w:o-r.x2,h:t.h}),t.y<r.y1&&n.push({x:r.x1,y:t.y,w:r.x2-r.x1+1,h:r.y1-t.y}),i>r.y2&&n.push({x:r.x1,y:r.y2+1,w:r.x2-r.x1+1,h:i-r.y2})),b={x1:t.x,y1:t.y,x2:t.x+t.w-1,y2:t.y+t.h-1},{cleanBox:e,dirtyBoxes:n}},u.absX=function(e){return e+g.x},u.absY=function(e){return e+g.y},u.resize=function(e,t){m="",h=e,p=t,s(c.scale),u.viewportChange()},u.clear=function(){c.logo?(u.resize(c.logo.width,c.logo.height),u.blitStringImage(c.logo.data,0,0)):(u.resize(640,20),f.clearRect(0,0,g.w,g.h)),d=[]},u.fillRect=function(e,t,r,n,o){i(o),f.fillRect(e-g.x,t-g.y,r,n)},u.copyImage=function(e,t,r,n,o,i){var s=e-g.x,a=t-g.y,u=r-g.x,l=n-g.y;f.drawImage(c.target,s,a,o,i,u,l,o,i)},u.startTile=function(e,t,r,n,o){var i,s,a,l,d,h;if(_=e,k=t,v=16===r&&16===n?w:f.createImageData(r,n),i=v.data,c.prefer_js)for(s=c.true_color?o:c.colourMap[o[0]],a=s[2],l=s[1],d=s[0],h=0;r*n*4>h;h+=4)i[h]=a,i[h+1]=l,i[h+2]=d,i[h+3]=255;else u.fillRect(e,t,r,n,o)},u.subTile=function(e,t,r,n,o){var i,s,a,l,f,d,h,y,p,g,b;if(c.prefer_js)for(i=v.data,h=v.width,a=c.true_color?o:c.colourMap[o[0]],l=a[2],f=a[1],d=a[0],g=e+r,b=t+n,y=t;b>y;y+=1)for(p=e;g>p;p+=1)s=4*(p+y*h),i[s]=l,i[s+1]=f,i[s+2]=d,i[s+3]=255;else u.fillRect(_+e,k+t,r,n,o)},u.finishTile=function(){c.prefer_js&&f.putImageData(v,_-g.x,k-g.y)},r=function(e,t,r,n,o,i,s,a){var u,c,l,d;for(u=f.createImageData(o,i),d=u.data,c=0,l=a;o*i*4>c;c+=4,l+=3)d[c]=s[l],d[c+1]=s[l+1],d[c+2]=s[l+2],d[c+3]=255;f.putImageData(u,e-r,t-n)},n=function(e,t,r,n,o,i,s,a){var u,c,l,d;for(u=f.createImageData(o,i),d=u.data,c=0,l=a;o*i*4>c;c+=4,l+=4)d[c]=s[l+2],d[c+1]=s[l+1],d[c+2]=s[l],d[c+3]=255;f.putImageData(u,e-r,t-n)},o=function(e,t,r,n,o,i,s,a){var u,l,d,h,y,p;for(u=f.createImageData(o,i),h=u.data,p=c.colourMap,l=0,d=a;o*i*4>l;l+=4,d+=1)y=p[s[d]],h[l]=y[2],h[l+1]=y[1],h[l+2]=y[0],h[l+3]=255;f.putImageData(u,e-r,t-n)},u.blitImage=function(e,t,r,i,s,a){c.true_color?n(e,t,g.x,g.y,r,i,s,a):o(e,t,g.x,g.y,r,i,s,a)},u.blitRgbImage=function(e,t,n,i,s,a){c.true_color?r(e,t,g.x,g.y,n,i,s,a):o(e,t,g.x,g.y,n,i,s,a)},u.blitStringImage=function(e,t,r){var n=new Image;n.onload=function(){f.drawImage(n,t-g.x,r-g.y)},n.src=e},u.drawImage=function(e,t,r){f.drawImage(e,t-g.x,r-g.y)},u.renderQ_push=function(e){d.push(e),1===d.length&&a()},a=function(){for(var e,t=!0;t&&d.length>0;){switch(e=d[0],e.type){case"copy":u.copyImage(e.old_x,e.old_y,e.x,e.y,e.width,e.height);break;case"fill":u.fillRect(e.x,e.y,e.width,e.height,e.color);break;case"blit":u.blitImage(e.x,e.y,e.width,e.height,e.data,0);break;case"blitRgb":u.blitRgbImage(e.x,e.y,e.width,e.height,e.data,0);break;case"img":e.img.complete?u.drawImage(e.img,e.x,e.y):t=!1}t&&(e=d.shift())}d.length>0&&requestAnimFrame(a)},u.changeCursor=function(e,t,r,n,o,i){return c.cursor_uri===!1?void y.Warn("changeCursor called but no cursor data URI support"):void(c.true_color?l(c.target,e,t,r,n,o,i):l(c.target,e,t,r,n,o,i,c.colourMap))},u.defaultCursor=function(){c.target.style.cursor="default"},t()}function l(e,t,r,n,o,i,s,a){"use strict";var u,c,l,f,d,h,y,p,b,m,v=[],w=i,_=s;for(w>_?_=w:w=_,v.push16le=function(e){this.push(255&e,e>>8&255)},v.push32le=function(e){this.push(255&e,e>>8&255,e>>16&255,e>>24&255)},c=40,l=w*_*4,d=Math.ceil(w*_/8),f=Math.ceil(w*_/8),v.push16le(0),v.push16le(2),v.push16le(1),v.push(w),v.push(_),v.push(0),v.push(0),v.push16le(n),v.push16le(o),v.push32le(c+l+d+f),v.push32le(22),v.push32le(c),v.push32le(w),v.push32le(2*_),v.push16le(1),v.push16le(32),v.push32le(0),v.push32le(d+f),v.push32le(0),v.push32le(0),v.push32le(0),v.push32le(0),m=_-1;m>=0;m-=1)for(b=0;w>b;b+=1)b>=i||m>=s?(v.push(0),v.push(0),v.push(0),v.push(0)):(y=m*Math.ceil(i/8)+Math.floor(b/8),p=r[y]<<b%8&128?255:0,a?(y=i*m+b,u=a[t[y]],v.push(u[2]),v.push(u[1]),v.push(u[0]),v.push(p)):(y=4*(i*m+b),v.push(t[y+2]),v.push(t[y+1]),v.push(t[y]),v.push(p)));for(m=0;_>m;m+=1)for(b=0;b<Math.ceil(w/8);b+=1)v.push(0);for(m=0;_>m;m+=1)for(b=0;b<Math.ceil(w/8);b+=1)v.push(0);h="data:image/x-icon;base64,"+g.encode(v),e.style.cursor="url("+h+") "+n+" "+o+", default"}function f(){function e(e,t,r,n,o){for(var i=0;24>t;)r|=(255&e[n++])<<t,t+=8;return i=r&65535>>16-o,r>>=o,t-=o,[t,r,n,i]}this.OK=0,this.DATA_ERROR=-3,this.WINDOW_SIZE=32768,this.TREE=function(){this.table=new Array(16),this.trans=new Array(288)},this.DATA=function(e){this.source="",this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=[],this.history=[],this.ltree=new e.TREE,this.dtree=new e.TREE},this.sltree=new this.TREE,this.sdtree=new this.TREE,this.length_bits=new Array(30),this.length_base=new Array(30),this.dist_bits=new Array(30),this.dist_base=new Array(30),this.clcidx=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.build_bits_base=function(e,t,r,n){var o,i;for(o=0;r>o;++o)e[o]=0;for(o=0;30-r>o;++o)e[o+r]=Math.floor(o/r);for(i=n,o=0;30>o;++o)t[o]=i,i+=1<<e[o]},this.build_fixed_trees=function(e,t){var r;for(r=0;7>r;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;24>r;++r)e.trans[r]=256+r;for(r=0;144>r;++r)e.trans[24+r]=r;for(r=0;8>r;++r)e.trans[168+r]=280+r;for(r=0;112>r;++r)e.trans[176+r]=144+r;for(r=0;5>r;++r)t.table[r]=0;for(t.table[5]=32,r=0;32>r;++r)t.trans[r]=r},this.build_tree=function(e,t,r,n){var o,i,s=new Array(16);for(o=0;16>o;++o)e.table[o]=0;for(o=0;n>o;++o)e.table[t[r+o]]++;for(e.table[0]=0,i=0,o=0;16>o;++o)s[o]=i,i+=e.table[o];for(o=0;n>o;++o)t[r+o]&&(e.trans[s[t[r+o]]++]=o)},this.getbit=function(e){var t;return e.bitcount--||(e.tag=255&e.source[e.sourceIndex++],e.bitcount=7),t=1&e.tag,e.tag>>=1,t},this.read_bits=function(t,r,n){if(!r)return n;var o=e(t.source,t.bitcount,t.tag,t.sourceIndex,r);return t.bitcount=o[0],t.tag=o[1],t.sourceIndex=o[2],o[3]+n},this.decode_symbol=function(e,t){for(;e.bitcount<16;)e.tag=e.tag|(255&e.source[e.sourceIndex++])<<e.bitcount,e.bitcount+=8;var r=0,n=0,o=0;do n=2*n+((e.tag&1<<o)>>o),++o,r+=t.table[o],n-=t.table[o];while(n>=0);return e.tag>>=o,e.bitcount-=o,t.trans[r+n]},this.decode_trees=function(e,t,r){var n,o,i,s,a,u,c=new this.TREE,l=new Array(320);for(n=this.read_bits(e,5,257),o=this.read_bits(e,5,1),i=this.read_bits(e,4,4),s=0;19>s;++s)l[s]=0;for(s=0;i>s;++s){var f=this.read_bits(e,3,0);l[this.clcidx[s]]=f}for(this.build_tree(c,l,0,19),a=0;n+o>a;){var d=this.decode_symbol(e,c);switch(d){case 16:var h=l[a-1];for(u=this.read_bits(e,2,3);u;--u)l[a++]=h;break;case 17:for(u=this.read_bits(e,3,3);u;--u)l[a++]=0;break;case 18:for(u=this.read_bits(e,7,11);u;--u)l[a++]=0;break;default:l[a++]=d}}this.build_tree(t,l,0,n),this.build_tree(r,l,n,o)},this.inflate_block_data=function(e,t,r){for(var n=e.dest,o=n.length;;){var i=this.decode_symbol(e,t);if(256==i)return this.OK;if(256>i)n[o++]=i,e.history.push(i);else{var s,a,u,c;if(i-=257,s=this.read_bits(e,this.length_bits[i],this.length_base[i]),a=this.decode_symbol(e,r),u=e.history.length-this.read_bits(e,this.dist_bits[a],this.dist_base[a]),0>u)throw"Invalid zlib offset "+u;for(c=u;u+s>c;++c)n[o++]=e.history[c],e.history.push(e.history[c])}}},this.inflate_uncompressed_block=function(e){var t,r,n;if(e.bitcount>7){var o=Math.floor(e.bitcount/8);e.sourceIndex-=o,e.bitcount=0,e.tag=0}if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!=(65535&~r))return this.DATA_ERROR;for(e.sourceIndex+=4,n=t;n;--n)e.history.push(e.source[e.sourceIndex]),e.dest[e.dest.length]=e.source[e.sourceIndex++];return e.bitcount=0,this.OK},this.inflate_fixed_block=function(e){return this.inflate_block_data(e,this.sltree,this.sdtree)},this.inflate_dynamic_block=function(e){return this.decode_trees(e,e.ltree,e.dtree),this.inflate_block_data(e,e.ltree,e.dtree)},this.init=function(){this.build_fixed_trees(this.sltree,this.sdtree),this.build_bits_base(this.length_bits,this.length_base,4,3),this.build_bits_base(this.dist_bits,this.dist_base,2,1),this.length_bits[28]=0,this.length_base[28]=258,this.reset()},this.reset=function(){this.d=new this.DATA(this),delete this.header},this.uncompress=function(e,t){var r,n=this.d;n.source=e,n.sourceIndex=t,n.bitcount=0,n.dest=[],"undefined"==typeof this.header&&(this.header=this.read_bits(n,16,0));var o=0;do{var i,s;switch(r=this.getbit(n),i=this.read_bits(n,2,0)){case 0:s=this.inflate_uncompressed_block(n);break;case 1:s=this.inflate_fixed_block(n);break;case 2:s=this.inflate_dynamic_block(n);break;default:return{status:this.DATA_ERROR}}if(s!=this.OK)return{status:this.DATA_ERROR};o++}while(!r&&n.sourceIndex<n.source.length);return n.history=n.history.slice(-this.WINDOW_SIZE),{status:this.OK,data:n.dest}}}function d(e){"use strict";function n(){var e,r;for(y.Debug(">> RFB.constructor"),e=0;e<H.length;e+=1)G[H[e][1]]=G[H[e][0]],X[H[e][1]]=H[e][0],Y[H[e][1]]=[0,0];try{Z=new c({target:W.target})}catch(n){y.Error("Display exception: "+n),d("fatal","No working Display")}return $=new a({target:W.focusContainer,onKeyPress:R}),et=new u({target:W.target,onMouseButton:M,onMouseMove:A,notify:$.sync}),r=Z.get_render_mode(),J=new t,J.on("message",b),J.on("open",function(){"connect"===N?d("ProtocolVersion","Starting VNC handshake"):p("Got unexpected WebSockets connection")}),J.on("close",function(e){y.Warn("WebSocket on-close event");var t="";e.code&&(t=" (code: "+e.code,e.reason&&(t+=", reason: "+e.reason),t+=")"),"disconnect"===N?d("disconnected","VNC disconnected"+t):"ProtocolVersion"===N?p("Failed to connect to server"+t):N in{failed:1,disconnected:1}?y.Error("Received onclose while disconnected"+t):p("Server disconnected"+t)}),J.on("error",function(){y.Warn("WebSocket on-error event")}),l(),h?(y.Info("Using native WebSockets"),d("loaded","noVNC ready: native WebSockets, "+r)):(y.Warn("Using web-socket-js bridge. Flash version: "+y.Flash.version),!y.Flash||y.Flash.version<9?d("fatal","WebSockets or <a href='http://get.adobe.com/flashplayer'>Adobe Flash</a> is required"):"file://"===document.location.href.substr(0,7)?d("fatal","'file://' URL is incompatible with Adobe Flash"):d("loaded","noVNC ready: WebSockets emulation, "+r)),y.Debug("<< RFB.constructor"),F}function o(){y.Debug(">> RFB.connect");var e;e="undefined"!=typeof UsingSocketIO?"http":W.encrypt?"wss":"ws",e+="://"+O+":"+U+"/"+K,y.Info("connecting to "+e),J.open(e,W.wsProtocols),y.Debug("<< RFB.connect")}function i(e,t){var n,o=[];for(n=0;n<e.length;n+=1)o.push(e.charCodeAt(n));return new r(o).encrypt(t)}function s(e){1===st&&p("Tight protocol handler only implements true color mode");var t,r,n,o,i,s,a=-1,u=0,c=-1,l=J.get_rQ(),f=J.get_rQi();if(ot.bytes=1,J.rQwait("TIGHT compression-control",ot.bytes))return!1;var d=function(e){for(var t=0;4>t;t++)u>>t&1&&(ot.zlibs[t].reset(),y.Info("Reset zlib stream "+t));var r=ot.zlibs[c].uncompress(e,0);return 0!==r.status&&y.Error("Invalid data in zlib stream"),r.data},h=function(e,t,r,n,o){var i,s,a,u,c,l,f,d=[];if(2===t)for(u=Math.floor((n+7)/8),c=Math.floor(n/8),s=0;o>s;s++){for(i=0;c>i;i++)for(a=7;a>=0;a--)l=3*(s*n+8*i+7-a),f=3*(e[s*u+i]>>a&1),d[l]=r[f],d[l+1]=r[f+1],d[l+2]=r[f+2];for(a=7;a>=8-n%8;a--)l=3*(s*n+8*i+7-a),f=3*(e[s*u+i]>>a&1),d[l]=r[f],d[l+1]=r[f+1],d[l+2]=r[f+2]}else for(s=0;o>s;s++)for(i=0;n>i;i++)l=3*(s*n+i),f=3*e[s*n+i],d[l]=r[f],d[l+1]=r[f+1],d[l+2]=r[f+2];return d},g=function(){var e=l[f+2]+1,t=e*st;if(ot.bytes+=t,J.rQwait("TIGHT palette "+r,ot.bytes))return!1;var o=2>=e?1:8,i=Math.floor((ot.width*o+7)/8),a=!1;if(i*ot.height<12?(a=!0,n=[0,i*ot.height]):n=T(J.rQslice(3+t,3+t+3)),ot.bytes+=n[0]+n[1],J.rQwait("TIGHT "+r,ot.bytes))return!1;J.rQshiftBytes(3);var u=J.rQshiftBytes(t);J.rQshiftBytes(n[0]),s=a?J.rQshiftBytes(n[1]):d(J.rQshiftBytes(n[1]));var c=h(s,e,u,ot.width,ot.height);return Z.renderQ_push({type:"blitRgb",data:c,x:ot.x,y:ot.y,width:ot.width,height:ot.height}),!0},b=function(){var e=!1,t=ot.width*ot.height*st;return 12>t?(e=!0,n=[0,t]):n=T(J.rQslice(1,4)),ot.bytes=1+n[0]+n[1],J.rQwait("TIGHT "+r,ot.bytes)?!1:(J.rQshiftBytes(1+n[0]),s=e?J.rQshiftBytes(n[1]):d(J.rQshiftBytes(n[1])),Z.renderQ_push({type:"blitRgb",data:s,x:ot.x,y:ot.y,width:ot.width,height:ot.height}),!0)};if(t=J.rQpeek8(),u=15&t,t>>=4,c=3&t,8===t)r="fill";else if(9===t)r="jpeg";else if(10===t)r="png";else if(4&t)r="filter";else{if(!(4>t))return p("Illegal tight compression received, ctl: "+t);r="copy"}if(e&&("filter"===r||"copy"===r))return p("filter/copy received in tightPNG mode");switch(r){case"fill":ot.bytes+=st;break;case"jpeg":ot.bytes+=3;break;case"png":ot.bytes+=3;break;case"filter":ot.bytes+=2;break;case"copy":}if(J.rQwait("TIGHT "+r,ot.bytes))return!1;switch(r){case"fill":J.rQshift8(),o=J.rQshiftBytes(st),Z.renderQ_push({type:"fill",x:ot.x,y:ot.y,width:ot.width,height:ot.height,color:[o[2],o[1],o[0]]});break;case"png":case"jpeg":if(n=T(J.rQslice(1,4)),ot.bytes=1+n[0]+n[1],J.rQwait("TIGHT "+r,ot.bytes))return!1;J.rQshiftBytes(1+n[0]),i=new Image,i.src="data:image/"+r+D(J.rQshiftBytes(n[1])),Z.renderQ_push({type:"img",img:i,x:ot.x,y:ot.y}),i=null;break;case"filter":if(a=l[f+1],1!==a)throw"Unsupported tight subencoding received, filter: "+a;if(!g())return!1;break;case"copy":if(!b())return!1}return ot.bytes=0,ot.rects-=1,!0}var l,d,p,b,m,v,w,_,k,x,E,S,I,Q,C,T,D,R,M,A,B,F={},W={},O="",U=5900,P="",K="",N="disconnected",z=0,V=3.8,q="",L=!1,j=0,H=[["COPYRECT",1],["TIGHT",7],["TIGHT_PNG",-260],["HEXTILE",5],["RRE",2],["RAW",0],["DesktopSize",-223],["Cursor",-239],["JPEG_quality_med",-26],["compress_hi",-247],["last_rect",-224],["xvp",-309]],G={},X={},Y={},J=null,Z=null,$=null,et=null,tt=null,rt=null,nt=null,ot={rects:0,subrects:0,lines:0,tiles:0,bytes:0,x:0,y:0,width:0,height:0,encoding:0,subencoding:-1,background:null,zlibs:[]},it=4,st=3,at=0,ut=0,ct="",lt=100,ft={last_fbu:0,fbu_total:0,fbu_total_cnt:0,full_fbu_total:0,full_fbu_cnt:0,fbu_rt_start:0,fbu_rt_total:0,fbu_rt_cnt:0,pixels:0},dt=!1,ht=0,yt=[],pt=!1,gt={};
return y.conf_defaults(W,F,e,[["target","wo","dom",null,"VNC display rendering Canvas object"],["focusContainer","wo","dom",document,"DOM element that captures keyboard input"],["encrypt","rw","bool",!1,"Use TLS/SSL/wss encryption"],["true_color","rw","bool",!0,"Request true color pixel data"],["local_cursor","rw","bool",!1,"Request locally rendered cursor"],["shared","rw","bool",!0,"Request shared mode"],["view_only","rw","bool",!1,"Disable client mouse/keyboard"],["xvp_password_sep","rw","str","@","Separator for XVP password fields"],["disconnectTimeout","rw","int",3,"Time (s) to wait for disconnection"],["wsProtocols","rw","arr",["binary","base64"],"Protocols to use in the WebSocket connection"],["repeaterID","rw","str","","RepeaterID to connect to"],["viewportDrag","rw","bool",!1,"Move the viewport on mouse drags"],["onUpdateState","rw","func",function(){},"onUpdateState(rfb, state, oldstate, statusMsg): RFB state update/change "],["onPasswordRequired","rw","func",function(){},"onPasswordRequired(rfb): VNC password is required "],["onClipboard","rw","func",function(){},"onClipboard(rfb, text): RFB clipboard contents received"],["onBell","rw","func",function(){},"onBell(rfb): RFB Bell message received "],["onFBUReceive","rw","func",function(){},"onFBUReceive(rfb, fbu): RFB FBU received but not yet processed "],["onFBUComplete","rw","func",function(){},"onFBUComplete(rfb, fbu): RFB FBU received and processed "],["onFBResize","rw","func",function(){},"onFBResize(rfb, width, height): frame buffer resized"],["onDesktopName","rw","func",function(){},"onDesktopName(rfb, name): desktop name received"],["onXvpInit","rw","func",function(){},"onXvpInit(version): XVP extensions active for this connection"],["updateState","rw","func",function(){},"obsolete, use onUpdateState"],["clipboardReceive","rw","func",function(){},"obsolete, use onClipboard"]]),F.set_local_cursor=function(e){!e||e in{0:1,no:1,"false":1}?W.local_cursor=!1:Z.get_cursor_uri()?W.local_cursor=!0:y.Warn("Browser does not support local cursor")},F.get_display=function(){return Z},F.get_keyboard=function(){return $},F.get_mouse=function(){return et},l=function(){var e;for(J.init(),ot.rects=0,ot.subrects=0,ot.lines=0,ot.tiles=0,ot.zlibs=[],ht=0,yt=[],e=0;e<H.length;e+=1)Y[H[e][1]][0]=0;for(e=0;4>e;e++)ot.zlibs[e]=new f,ot.zlibs[e].init()},_=function(){var e,t;for(y.Info("Encoding stats for this connection:"),e=0;e<H.length;e+=1)t=Y[H[e][1]],t[0]+t[1]>0&&y.Info("    "+H[e][0]+": "+t[0]+" rects");for(y.Info("Encoding stats since page load:"),e=0;e<H.length;e+=1)t=Y[H[e][1]],t[0]+t[1]>0&&y.Info("    "+H[e][0]+": "+t[1]+" rects")},d=function(e,t){var r,n,i=N;if(e===i)return void y.Debug("Already in state '"+e+"', ignoring.");switch(e in{disconnected:1,loaded:1,connect:1,disconnect:1,failed:1,fatal:1}&&(tt&&(clearInterval(tt),tt=null),nt&&(clearTimeout(nt),nt=null),Z&&Z.get_context()&&($.ungrab(),et.ungrab(),Z.defaultCursor(),("debug"!==y.get_logging()||"loaded"===e)&&Z.clear()),J.close()),"fatal"===i&&y.Error("Fatal error, cannot continue"),r="failed"===e||"fatal"===e?y.Error:y.Warn,n="undefined"!=typeof t?" Msg: "+t:"",r("New state '"+e+"', was '"+i+"'."+n),N="failed"===i&&"disconnected"===e?"failed":e,rt&&"disconnect"!==N&&(y.Debug("Clearing disconnect timer"),clearTimeout(rt),rt=null),e){case"normal":("disconnected"===i||"failed"===i)&&y.Error("Invalid transition from 'disconnected' or 'failed' to 'normal'");break;case"connect":l(),o();break;case"disconnect":dt||(rt=setTimeout(function(){p("Disconnect timeout")},1e3*W.disconnectTimeout)),_();break;case"failed":"disconnected"===i&&y.Error("Invalid transition from 'disconnected' to 'failed'"),"normal"===i&&y.Error("Error while connected."),"init"===i&&y.Error("Error while initializing."),setTimeout(function(){d("disconnected")},50)}"failed"===i&&"disconnected"===e?(W.updateState(F,e,i),W.onUpdateState(F,e,i)):(W.updateState(F,e,i,t),W.onUpdateState(F,e,i,t))},p=function(e){return d("failed",e),!1},b=function(){if(0===J.rQlen())return void y.Warn("handle_message called on empty receive queue");switch(N){case"disconnected":case"failed":y.Error("Got data while disconnected");break;case"normal":v()&&J.rQlen()>0&&(null===nt?(y.Debug("More data to process, creating timer"),nt=setTimeout(function(){nt=null,b()},10)):y.Debug("More data to process, existing timer"));break;default:m()}},B=function(){"normal"===N&&!pt&&yt.length>0&&(J.send(yt),yt=[])},R=function(e,t){W.view_only||J.send(I(e,t))},M=function(e,t,r,n){if(r?ht|=n:ht^=n,W.viewportDrag){if(r&&!pt)return pt=!0,void(gt={x:e,y:t});pt=!1}W.view_only||(yt=yt.concat(Q(Z.absX(e),Z.absY(t))),J.send(yt),yt=[])},A=function(e,t){var r,n;return pt?(r=gt.x-e,n=gt.y-t,gt={x:e,y:t},void Z.viewportChange(r,n)):void(W.view_only||(yt=yt.concat(Q(Z.absX(e),Z.absY(t))),B()))},m=function(){var e,t,r,n,o,s,a,u,c,l,f,h,g,b,v,w,_,E,I,Q,C,T,D,R,M,A;switch(N){case"ProtocolVersion":if(J.rQlen()<12)return p("Incomplete protocol version");switch(n=J.rQshiftStr(12).substr(4,7),y.Info("Server ProtocolVersion: "+n),D=0,n){case"000.000":D=1;break;case"003.003":z=3.3;break;case"003.006":z=3.3;break;case"003.889":z=3.3;break;case"003.007":z=3.7;break;case"003.008":z=3.8;break;case"004.000":z=3.8;break;case"004.001":z=3.8;break;default:return p("Invalid server version "+n)}if(D){for(s=W.repeaterID;s.length<250;)s+="\x00";J.send_string(s);break}z>V&&(z=V),dt||(tt=setInterval(function(){J.flush()},50)),o="00"+parseInt(z,10)+".00"+10*z%10,J.send_string("RFB "+o+"\n"),d("Security","Sent ProtocolVersion: "+o);break;case"Security":if(z>=3.7){if(c=J.rQshift8(),J.rQwait("security type",c,1))return!1;if(0===c)return e=J.rQshift32(),t=J.rQshiftStr(e),p("Security failure: "+t);for(q=0,u=J.rQshiftBytes(c),y.Debug("Server security types: "+u),a=0;a<u.length;a+=1)u[a]>q&&(u[a]<=16||22==u[a])&&(q=u[a]);if(0===q)return p("Unsupported security types: "+u);J.send([q])}else{if(J.rQwait("security scheme",4))return!1;q=J.rQshift32()}d("Authentication","Authenticating using scheme: "+q),m();break;case"Authentication":switch(q){case 0:return J.rQwait("auth reason",4)?!1:(e=J.rQshift32(),t=J.rQshiftStr(e),p("Auth failure: "+t));case 1:if(z>=3.8)return void d("SecurityResult");break;case 22:if(R=W.xvp_password_sep,M=P.split(R),M.length<3)return d("password","XVP credentials required (user"+R+"target"+R+"password) -- got only "+P),void W.onPasswordRequired(F);A=String.fromCharCode(M[0].length)+String.fromCharCode(M[1].length)+M[0]+M[1],J.send_string(A),P=M.slice(2).join(R),q=2;case 2:return 0===P.length?(d("password","Password Required"),void W.onPasswordRequired(F)):J.rQwait("auth challenge",16)?!1:(l=J.rQshiftBytes(16),f=i(P,l),J.send(f),void d("SecurityResult"));case 16:if(J.rQwait("num tunnels",4))return!1;var O=J.rQshift32();if(L=!0,0!=O)return void p("Protocol requested tunnels, not currently supported. numTunnels: "+O);var U={STDVNOAUTH__:1,STDVVNCAUTH_:2},K=[];if(J.rQwait("sub auth count",4))return!1;for(var j=J.rQshift32(),a=0;j>a;a++){if(J.rQwait("sub auth capabilities "+a,16))return!1;var H=(J.rQshift32(),J.rQshiftStr(12));K.push(H)}for(var G in U)if(-1!=K.indexOf(G))switch(J.send([0,0,0,U[G]]),G){case"STDVNOAUTH__":return void d("SecurityResult");case"STDVVNCAUTH_":return q=2,void m();default:return void p("Unsupported tiny auth scheme: "+G)}return;default:return void p("Unsupported auth scheme: "+q)}d("ClientInitialisation","No auth required"),m();break;case"SecurityResult":if(J.rQwait("VNC auth response ",4))return!1;switch(J.rQshift32()){case 0:break;case 1:if(z>=3.8){if(r=J.rQshift32(),J.rQwait("SecurityResult reason",r,8))return!1;t=J.rQshiftStr(r),p(t)}else p("Authentication failed");return;case 2:return p("Too many auth attempts")}d("ClientInitialisation","Authentication OK"),m();break;case"ClientInitialisation":J.send([W.shared?1:0]),d("ServerInitialisation","Authentication OK");break;case"ServerInitialisation":if(J.rQwait("server initialization",24))return!1;if(at=J.rQshift16(),ut=J.rQshift16(),h=J.rQshift8(),g=J.rQshift8(),b=J.rQshift8(),C=J.rQshift8(),v=J.rQshift16(),w=J.rQshift16(),_=J.rQshift16(),E=J.rQshift8(),I=J.rQshift8(),Q=J.rQshift8(),J.rQshiftStr(3),y.Info("Screen: "+at+"x"+ut+", bpp: "+h+", depth: "+g+", big_endian: "+b+", true_color: "+C+", red_max: "+v+", green_max: "+w+", blue_max: "+_+", red_shift: "+E+", green_shift: "+I+", blue_shift: "+Q),0!==b&&y.Warn("Server native endian is not little endian"),16!==E&&y.Warn("Server native red-shift is not 16"),0!==Q&&y.Warn("Server native blue-shift is not 0"),T=J.rQshift32(),ct=y.decodeUTF8(J.rQshiftStr(T)),W.onDesktopName(F,ct),W.true_color&&"Intel(r) AMT KVM"===ct&&(y.Warn("Intel AMT KVM only support 8/16 bit depths. Disabling true color"),W.true_color=!1),L){var X=J.rQshift16(),Y=J.rQshift16(),rt=J.rQshift16();J.rQshift16();for(var a=0;X>a;a++){J.rQshiftStr(16)}for(var a=0;Y>a;a++){J.rQshiftStr(16)}for(var a=0;rt>a;a++){J.rQshiftStr(16)}}Z.set_true_color(W.true_color),W.onFBResize(F,at,ut),Z.resize(at,ut),$.grab(),et.grab(),W.true_color?(it=4,st=3):(it=1,st=1),f=k(),f=f.concat(x()),f=f.concat(S()),ft.fbu_rt_start=(new Date).getTime(),ft.pixels=0,J.send(f),B(),W.encrypt?d("normal","Connected (encrypted) to: "+ct):d("normal","Connected (unencrypted) to: "+ct)}},v=function(){var e,t,r,n,o,i,s,a,u,c,l,f=!0;switch(e=ot.rects>0?0:J.rQshift8()){case 0:f=w(),f&&J.send(S());break;case 1:if(y.Debug("SetColourMapEntries"),J.rQshift8(),o=J.rQshift16(),i=J.rQshift16(),J.rQwait("SetColourMapEntries",6*i,6))return!1;for(n=0;i>n;n+=1)s=J.rQshift16(),s=parseInt(s/256,10),a=parseInt(J.rQshift16()/256,10),u=parseInt(J.rQshift16()/256,10),Z.set_colourMap([u,a,s],o+n);y.Debug("colourMap: "+Z.get_colourMap()),y.Info("Registered "+i+" colourMap entries");break;case 2:y.Debug("Bell"),W.onBell(F);break;case 3:if(y.Debug("ServerCutText"),J.rQwait("ServerCutText header",7,1))return!1;if(J.rQshiftBytes(3),t=J.rQshift32(),J.rQwait("ServerCutText",t,8))return!1;r=J.rQshiftStr(t),W.clipboardReceive(F,r),W.onClipboard(F,r);break;case 250:switch(J.rQshift8(),c=J.rQshift8(),l=J.rQshift8()){case 0:d(N,"Operation failed");break;case 1:j=c,y.Info("XVP extensions enabled (version "+j+")"),W.onXvpInit(j);break;default:p("Disconnected: illegal server XVP message "+l)}break;default:p("Disconnected: illegal server message type "+e),y.Debug("ws.rQslice(0,30):"+J.rQslice(0,30))}return f},w=function(){var e,t,r,n=!0;if(0===ot.rects){if(J.rQwait("FBU header",3))return J.rQunshift8(0),!1;J.rQshift8(),ot.rects=J.rQshift16(),ot.bytes=0,ft.cur_fbu=0,ft.fbu_rt_start>0&&(e=(new Date).getTime(),y.Info("First FBU latency: "+(e-ft.fbu_rt_start)))}for(;ot.rects>0;){if("normal"!==N)return!1;if(J.rQwait("FBU",ot.bytes))return!1;if(0===ot.bytes){if(J.rQwait("rect header",12))return!1;if(t=J.rQshiftBytes(12),ot.x=(t[0]<<8)+t[1],ot.y=(t[2]<<8)+t[3],ot.width=(t[4]<<8)+t[5],ot.height=(t[6]<<8)+t[7],ot.encoding=parseInt((t[8]<<24)+(t[9]<<16)+(t[10]<<8)+t[11],10),W.onFBUReceive(F,{x:ot.x,y:ot.y,width:ot.width,height:ot.height,encoding:ot.encoding,encodingName:X[ot.encoding]}),!X[ot.encoding])return p("Disconnected: unsupported encoding "+ot.encoding),!1}if(ft.last_fbu=(new Date).getTime(),n=G[ot.encoding](),e=(new Date).getTime(),ft.cur_fbu+=e-ft.last_fbu,n&&(Y[ot.encoding][0]+=1,Y[ot.encoding][1]+=1,ft.pixels+=ot.width*ot.height),ft.pixels>=at*ut&&((ot.width===at&&ot.height===ut||ft.fbu_rt_start>0)&&(ft.full_fbu_total+=ft.cur_fbu,ft.full_fbu_cnt+=1,y.Info("Timing of full FBU, cur: "+ft.cur_fbu+", total: "+ft.full_fbu_total+", cnt: "+ft.full_fbu_cnt+", avg: "+ft.full_fbu_total/ft.full_fbu_cnt)),ft.fbu_rt_start>0&&(r=e-ft.fbu_rt_start,ft.fbu_rt_total+=r,ft.fbu_rt_cnt+=1,y.Info("full FBU round-trip, cur: "+r+", total: "+ft.fbu_rt_total+", cnt: "+ft.fbu_rt_cnt+", avg: "+ft.fbu_rt_total/ft.fbu_rt_cnt),ft.fbu_rt_start=0)),!n)return n}return W.onFBUComplete(F,{x:ot.x,y:ot.y,width:ot.width,height:ot.height,encoding:ot.encoding,encodingName:X[ot.encoding]}),!0},G.RAW=function(){var e,t;return 0===ot.lines&&(ot.lines=ot.height),ot.bytes=ot.width*it,J.rQwait("RAW",ot.bytes)?!1:(e=ot.y+(ot.height-ot.lines),t=Math.min(ot.lines,Math.floor(J.rQlen()/(ot.width*it))),Z.blitImage(ot.x,e,ot.width,t,J.get_rQ(),J.get_rQi()),J.rQshiftBytes(ot.width*t*it),ot.lines-=t,ot.lines>0?ot.bytes=ot.width*it:(ot.rects-=1,ot.bytes=0),!0)},G.COPYRECT=function(){return ot.bytes=4,J.rQwait("COPYRECT",4)?!1:(Z.renderQ_push({type:"copy",old_x:J.rQshift16(),old_y:J.rQshift16(),x:ot.x,y:ot.y,width:ot.width,height:ot.height}),ot.rects-=1,ot.bytes=0,!0)},G.RRE=function(){var e,t,r,n,o,i;if(0===ot.subrects){if(ot.bytes=4+it,J.rQwait("RRE",4+it))return!1;ot.subrects=J.rQshift32(),e=J.rQshiftBytes(it),Z.fillRect(ot.x,ot.y,ot.width,ot.height,e)}for(;ot.subrects>0&&J.rQlen()>=it+8;)e=J.rQshiftBytes(it),t=J.rQshift16(),r=J.rQshift16(),n=J.rQshift16(),o=J.rQshift16(),Z.fillRect(ot.x+t,ot.y+r,n,o,e),ot.subrects-=1;return ot.subrects>0?(i=Math.min(lt,ot.subrects),ot.bytes=(it+8)*i):(ot.rects-=1,ot.bytes=0),!0},G.HEXTILE=function(){var e,t,r,n,o,i,s,a,u,c,l,f,d,h,g,b,m,v=J.get_rQ(),w=J.get_rQi();for(0===ot.tiles&&(ot.tiles_x=Math.ceil(ot.width/16),ot.tiles_y=Math.ceil(ot.height/16),ot.total_tiles=ot.tiles_x*ot.tiles_y,ot.tiles=ot.total_tiles);ot.tiles>0;){if(ot.bytes=1,J.rQwait("HEXTILE subencoding",ot.bytes))return!1;if(e=v[w],e>30)return p("Disconnected: illegal hextile subencoding "+e),!1;if(t=0,n=ot.total_tiles-ot.tiles,o=n%ot.tiles_x,a=Math.floor(n/ot.tiles_x),i=ot.x+16*o,u=ot.y+16*a,s=Math.min(16,ot.x+ot.width-i),c=Math.min(16,ot.y+ot.height-u),1&e)ot.bytes+=s*c*it;else if(2&e&&(ot.bytes+=it),4&e&&(ot.bytes+=it),8&e){if(ot.bytes+=1,J.rQwait("hextile subrects header",ot.bytes))return!1;t=v[w+ot.bytes-1],ot.bytes+=16&e?t*(it+2):2*t}if(J.rQwait("hextile",ot.bytes))return!1;if(ot.subencoding=v[w],w+=1,0===ot.subencoding)1&ot.lastsubencoding?y.Debug("     Ignoring blank after RAW"):Z.fillRect(i,u,s,c,ot.background);else if(1&ot.subencoding)Z.blitImage(i,u,s,c,v,w),w+=ot.bytes-1;else{if(2&ot.subencoding&&(ot.background=v.slice(w,w+it),w+=it),4&ot.subencoding&&(ot.foreground=v.slice(w,w+it),w+=it),Z.startTile(i,u,s,c,ot.background),8&ot.subencoding)for(t=v[w],w+=1,f=0;t>f;f+=1)16&ot.subencoding?(r=v.slice(w,w+it),w+=it):r=ot.foreground,l=v[w],w+=1,d=l>>4,h=15&l,g=v[w],w+=1,b=(g>>4)+1,m=(15&g)+1,Z.subTile(d,h,b,m,r);Z.finishTile()}J.set_rQi(w),ot.lastsubencoding=ot.subencoding,ot.bytes=0,ot.tiles-=1}return 0===ot.tiles&&(ot.rects-=1),!0},T=function(e){var t=1,r=0;return r+=127&e[0],128&e[0]&&(t+=1,r+=(127&e[1])<<7,128&e[1]&&(t+=1,r+=e[2]<<14)),[t,r]},D=function(e){return";base64,"+g.encode(e)},G.TIGHT=function(){return s(!1)},G.TIGHT_PNG=function(){return s(!0)},G.last_rect=function(){return ot.rects=0,!0},G.DesktopSize=function(){return y.Debug(">> set_desktopsize"),at=ot.width,ut=ot.height,W.onFBResize(F,at,ut),Z.resize(at,ut),ft.fbu_rt_start=(new Date).getTime(),ot.bytes=0,ot.rects-=1,y.Debug("<< set_desktopsize"),!0},G.Cursor=function(){var e,t,r,n,o,i;return y.Debug(">> set_cursor"),e=ot.x,t=ot.y,r=ot.width,n=ot.height,o=r*n*it,i=Math.floor((r+7)/8)*n,ot.bytes=o+i,J.rQwait("cursor encoding",ot.bytes)?!1:(Z.changeCursor(J.rQshiftBytes(o),J.rQshiftBytes(i),e,t,r,n),ot.bytes=0,ot.rects-=1,y.Debug("<< set_cursor"),!0)},G.JPEG_quality_lo=function(){y.Error("Server sent jpeg_quality pseudo-encoding")},G.compress_lo=function(){y.Error("Server sent compress level pseudo-encoding")},k=function(){var e;return e=[0],e.push8(0),e.push8(0),e.push8(0),e.push8(8*it),e.push8(8*st),e.push8(0),e.push8(W.true_color?1:0),e.push16(255),e.push16(255),e.push16(255),e.push8(16),e.push8(8),e.push8(0),e.push8(0),e.push8(0),e.push8(0),e},x=function(){var e,t,r=[];for(t=0;t<H.length;t+=1)"Cursor"!==H[t][0]||W.local_cursor?"TIGHT"!==H[t][0]||W.true_color?r.push(H[t][1]):y.Warn("Skipping tight, only support with true color"):y.Debug("Skipping Cursor pseudo-encoding");for(e=[2],e.push8(0),e.push16(r.length),t=0;t<r.length;t+=1)e.push32(r[t]);return e},E=function(e,t,r,n,o){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=0),"undefined"==typeof n&&(n=at),"undefined"==typeof o&&(o=ut);var i;return i=[3],i.push8(e),i.push16(t),i.push16(r),i.push16(n),i.push16(o),i},S=function(){var e,t,r,n=Z.getCleanDirtyReset(),o=[];for(t=n.cleanBox,t.w>0&&t.h>0&&(o=o.concat(E(1,t.x,t.y,t.w,t.h))),e=0;e<n.dirtyBoxes.length;e++)r=n.dirtyBoxes[e],o=o.concat(E(0,r.x,r.y,r.w,r.h));return o},I=function(e,t){var r;return r=[4],r.push8(t),r.push16(0),r.push32(e),r},Q=function(e,t){var r;return r=[5],r.push8(ht),r.push16(e),r.push16(t),r},C=function(e){var t,r,n;for(t=[6],t.push8(0),t.push8(0),t.push8(0),t.push32(e.length),n=e.length,r=0;n>r;r+=1)t.push(e.charCodeAt(r));return t},F.connect=function(e,t,r,n){return O=e,U=t,P=void 0!==r?r:"",K=void 0!==n?n:"",O&&U?void d("connect"):p("Must set host and port")},F.disconnect=function(){d("disconnect","Disconnecting")},F.sendPassword=function(e){P=e,N="Authentication",setTimeout(m,1)},F.sendCtrlAltDel=function(){if("normal"!==N||W.view_only)return!1;y.Info("Sending Ctrl-Alt-Del");var e=[];e=e.concat(I(65507,1)),e=e.concat(I(65513,1)),e=e.concat(I(65535,1)),e=e.concat(I(65535,0)),e=e.concat(I(65513,0)),e=e.concat(I(65507,0)),J.send(e)},F.xvpOp=function(e,t){return e>j?!1:(y.Info("Sending XVP operation "+t+" (version "+e+")"),J.send_string("Ãº\x00"+String.fromCharCode(e)+String.fromCharCode(t)),!0)},F.xvpShutdown=function(){return F.xvpOp(1,2)},F.xvpReboot=function(){return F.xvpOp(1,3)},F.xvpReset=function(){return F.xvpOp(1,4)},F.sendKey=function(e,t){if("normal"!==N||W.view_only)return!1;var r=[];"undefined"!=typeof t?(y.Info("Sending key code ("+(t?"down":"up")+"): "+e),r=r.concat(I(e,t?1:0))):(y.Info("Sending key code (down + up): "+e),r=r.concat(I(e,1)),r=r.concat(I(e,0))),J.send(r)},F.clipboardPasteFrom=function(e){"normal"===N&&J.send(C(e))},F.testMode=function(e,t){dt=!0,F.recv_message=J.testMode(e,t),B=function(){},F.connect=function(e,t,r){O=e,U=t,P=r,l(),d("ProtocolVersion","Starting VNC handshake")}},n()}var h,y={};Array.prototype.push8=function(e){this.push(255&e)},Array.prototype.push16=function(e){this.push(e>>8&255,255&e)},Array.prototype.push32=function(e){this.push(e>>24&255,e>>16&255,e>>8&255,255&e)},Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var r=new Array(t),n=arguments[1],o=0;t>o;o++)o in this&&(r[o]=e.call(n,this[o],o,this));return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=t);t>r;r++)if(r in this&&this[r]===e)return r;return-1}),e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),y._log_level="warn",y.init_logging=function(t){switch("undefined"==typeof t?t=y._log_level:y._log_level=t,"undefined"==typeof e.console&&(e.console="undefined"!=typeof e.opera?{log:e.opera.postError,warn:e.opera.postError,error:e.opera.postError}:{log:function(){},warn:function(){},error:function(){}}),y.Debug=y.Info=y.Warn=y.Error=function(){},t){case"debug":y.Debug=function(e){console.log(e)};case"info":y.Info=function(e){console.log(e)};case"warn":y.Warn=function(e){console.warn(e)};case"error":y.Error=function(e){console.error(e)};case"none":break;default:throw"invalid logging type '"+t+"'"}},y.get_logging=function(){return y._log_level},y.init_logging(),y.conf_default=function(e,t,r,n,o,i,s,a){var u,c;u=function(t){return i in{arr:1,array:1}&&"undefined"!=typeof t?e[n][t]:e[n]},c=function(t,r){i in{"boolean":1,bool:1}?t=!t||t in{0:1,no:1,"false":1}?!1:!0:i in{integer:1,"int":1}?t=parseInt(t,10):"str"===i?t=String(t):"func"===i&&(t||(t=function(){})),"undefined"!=typeof r?e[n][r]=t:e[n]=t},t[n+"_description"]=a,"undefined"==typeof t["get_"+n]&&(t["get_"+n]=u),"undefined"==typeof t["set_"+n]&&(t["set_"+n]=function(t,r){if(o in{RO:1,ro:1})throw n+" is read-only";if(o in{WO:1,wo:1}&&"undefined"!=typeof e[n])throw n+" can only be set once";c(t,r)}),"undefined"!=typeof r[n]?s=r[n]:i in{arr:1,array:1}&&!(s instanceof Array)&&(s=[]),c(s)},y.conf_defaults=function(e,t,r,n){var o;for(o=0;o<n.length;o++)y.conf_default(e,t,r,n[o][0],n[o][1],n[o][2],n[o][3],n[o][4])},y.decodeUTF8=function(e){return decodeURIComponent(escape(e))},y.get_include_uri=function(){return"undefined"!=typeof INCLUDE_URI?INCLUDE_URI:"include/"},y._loading_scripts=[],y._pending_scripts=[],y.load_scripts=function(t){for(var r,n=document.getElementsByTagName("head")[0],o=y._loading_scripts,i=y._pending_scripts,s=0;s<t.length;s++)r=document.createElement("script"),r.type="text/javascript",r.src=y.get_include_uri()+t[s],r.onload=r.onreadystatechange=function(){for(;o.length>0&&("loaded"===o[0].readyState||"complete"===o[0].readyState);){var t=o.shift();n.appendChild(t)}(!this.readyState||y.Engine.presto&&"loaded"===this.readyState||"complete"===this.readyState)&&i.indexOf(this)>=0&&(this.onload=this.onreadystatechange=null,i.splice(i.indexOf(this),1),0===i.length&&e.onscriptsload&&e.onscriptsload())},y.Engine.trident?o.push(r):(r.async=!1,n.appendChild(r)),i.push(r)},y.getPosition=function(){function t(t,r){if(t.currentStyle)var n=t.currentStyle[r];else if(e.getComputedStyle)var n=e.getComputedStyle(t,null)[r];return n}function r(){var e=0,t=0,r=document.getElementsByTagName("html")[0];return e=r.scrollTop&&document.documentElement.scrollTop?r.scrollTop:r.scrollTop||document.documentElement.scrollTop?r.scrollTop+document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0,t=r.scrollLeft&&document.documentElement.scrollLeft?r.scrollLeft:r.scrollLeft||document.documentElement.scrollLeft?r.scrollLeft+document.documentElement.scrollLeft:document.body.scrollLeft?document.body.scrollLeft:0,[t,e]}return function(n){for(var o=0,i=0,s=n,a=!1;(s=s.parentNode)&&s!=document.body;)o-=s.scrollLeft||0,i-=s.scrollTop||0,"fixed"==t(s,"position")&&(a=!0);if(a&&!e.opera){var u=r();o+=u[0],i+=u[1]}do o+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return{x:o,y:i}}}(),y.getEventPosition=function(t,r,n){var o,i,s,a;o=t?t:e.event,o=o.changedTouches?o.changedTouches[0]:o.touches?o.touches[0]:o,o.pageX||o.pageY?(i=o.pageX,s=o.pageY):(o.clientX||o.clientY)&&(i=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=o.clientY+document.body.scrollTop+document.documentElement.scrollTop),a=y.getPosition(r),"undefined"==typeof n&&(n=1);var u=i-a.x,c=s-a.y,l=Math.max(Math.min(u,r.width-1),0),f=Math.max(Math.min(c,r.height-1),0);return{x:l/n,y:f/n,realx:u/n,realy:c/n}},y.addEvent=function(e,t,r){if(e.attachEvent){var n=e.attachEvent("on"+t,r);return n}if(e.addEventListener)return e.addEventListener(t,r,!1),!0;throw"Handler could not be attached"},y.removeEvent=function(e,t,r){if(e.detachEvent){var n=e.detachEvent("on"+t,r);return n}if(e.removeEventListener)return e.removeEventListener(t,r,!1),!0;throw"Handler could not be removed"},y.stopEvent=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},y.Features={xpath:!!document.evaluate,air:!!e.runtime,query:!!document.querySelector},y.Engine={presto:function(){return e.opera?!0:!1}(),trident:function(){return e.ActiveXObject?e.XMLHttpRequest?document.querySelectorAll?6:5:4:!1}(),webkit:function(){try{return navigator.taintEnabled?!1:y.Features.xpath?y.Features.query?525:420:419}catch(e){return!1}}(),gecko:function(){return document.getBoxObjectFor||null!=e.mozInnerScreenX?document.getElementsByClassName?19:18:!1}()},y.Engine.webkit&&(y.Engine.webkit=function(e){var t=new RegExp("WebKit/([0-9.]*) ");return e=(navigator.userAgent.match(t)||["",e])[1],parseFloat(e,10)}(y.Engine.webkit)),y.Flash=function(){var e,t;try{e=navigator.plugins["Shockwave Flash"].description}catch(r){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0 r0"}}return t=e.match(/\d+/g),{version:parseInt(t[0]||"0."+t[1],10)||0,build:parseInt(t[2],10)||0}}();var p={};e.$D||(e.$D=function(e){return document.getElementById?document.getElementById(e):document.all?document.all[e]:document.layers?document.layers[e]:void 0}),p.init_logging=function(e){y._log_level="undefined"!=typeof e?e:(document.location.href.match(/logging=([A-Za-z0-9\._\-]*)/)||["",y._log_level])[1],y.init_logging()},p.dirObj=function(e,t,r){var n,o="",i="";t||(t=2),r||(r="");for(n in e)t>1&&"object"==typeof e[n]?o+=p.dirObj(e[n],t-1,r+"."+n):(i="undefined"==typeof e[n]?"undefined":e[n].toString().replace("\n"," "),i.length>30&&(i=i.substr(0,30)+"..."),o+=r+"."+n+": "+i+"\n");return o},p.getQueryVar=function(e,t){var r=new RegExp(".*[?&]"+e+"=([^&#]*)"),n=document.location.href.match(r);return"undefined"==typeof t&&(t=null),n?decodeURIComponent(n[1]):t},p.createCookie=function(e,t,r){var n,o,i;r?(n=new Date,n.setTime(n.getTime()+24*r*60*60*1e3),o="; expires="+n.toGMTString()):o="",i="https:"===document.location.protocol?"; secure":"",document.cookie=e+"="+t+o+"; path=/"+i},p.readCookie=function(e,t){var r,n,o=e+"=",i=document.cookie.split(";");for(r=0;r<i.length;r+=1){for(n=i[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(o))return n.substring(o.length,n.length)}return"undefined"!=typeof t?t:null},p.eraseCookie=function(e){p.createCookie(e,"",-1)},p.initSettings=function(t){var r=Array.prototype.slice.call(arguments,1);e.chrome&&e.chrome.storage?e.chrome.storage.sync.get(function(e){p.settings=e,console.log(p.settings),t&&t.apply(this,r)}):t&&t.apply(this,r)},p.writeSetting=function(t,r){e.chrome&&e.chrome.storage?p.settings[t]!==r&&(p.settings[t]=r,e.chrome.storage.sync.set(p.settings)):localStorage.setItem(t,r)},p.readSetting=function(t,r){var n;return n=e.chrome&&e.chrome.storage?p.settings[t]:localStorage.getItem(t),"undefined"==typeof n&&(n=null),null===n&&void 0!==typeof r?r:n},p.eraseSetting=function(t){e.chrome&&e.chrome.storage?(e.chrome.storage.sync.remove(t),delete p.settings[t]):localStorage.removeItem(t)},p.getStylesheets=function(){var e,t,r=[];for(t=document.getElementsByTagName("link"),e=0;e<t.length;e+=1)t[e].title&&t[e].rel.toUpperCase().indexOf("STYLESHEET")>-1&&r.push(t[e]);return r},p.selectStylesheet=function(e){var t,r,n=p.getStylesheets();for("undefined"==typeof e&&(e="default"),t=0;t<n.length;t+=1)r=n[t],r.title===e?(y.Debug("Using stylesheet "+e),r.disabled=!1):r.disabled=!0;return e};var g={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode:function(e){"use strict";var t="",r=g.toBase64Table,n=e.length,o=n%3,i=0,s=0;for(i=0;n-2>i;i+=3)t+=r[e[i]>>2],t+=r[((3&e[i])<<4)+(e[i+1]>>4)],t+=r[((15&e[i+1])<<2)+(e[i+2]>>6)],t+=r[63&e[i+2]];return 2===o?(s=n-o,t+=r[e[s]>>2],t+=r[((3&e[s])<<4)+(e[s+1]>>4)],t+=r[(15&e[s+1])<<2],t+=r[64]):1===o&&(s=n-o,t+=r[e[s]>>2],t+=r[(3&e[s])<<4],t+=r[64],t+=r[64]),t},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(e,t){"use strict";t="undefined"!=typeof t?t:0;var r,n,o,i,s,a,u=g.toBinaryTable,c=g.base64Pad,l=0,f=0,d=e.indexOf("=")-t;for(0>d&&(d=e.length-t),n=3*(d>>2)+Math.floor(d%4/1.5),r=new Array(n),o=0,i=t;i<e.length;i++)s=u[127&e.charCodeAt(i)],a=e.charAt(i)===c,-1!==s?(f=f<<6|s,l+=6,l>=8&&(l-=8,a||(r[o++]=f>>l&255),f&=(1<<l)-1)):console.error("Illegal character code "+e.charCodeAt(i)+" at position "+i);if(l)throw{name:"Base64-Error",message:"Corrupted base64 string"};return r}};e.WebSocket&&!e.WEB_SOCKET_FORCE_FLASH?h=!0:e.MozWebSocket&&!e.WEB_SOCKET_FORCE_FLASH?(h=!0,e.WebSocket=e.MozWebSocket):(h=!1,function(){e.WEB_SOCKET_SWF_LOCATION=y.get_include_uri()+"web-socket-js/WebSocketMain.swf",y.Engine.trident&&(y.Debug("Forcing uncached load of WebSocketMain.swf"),e.WEB_SOCKET_SWF_LOCATION+="?"+Math.random()),y.load_scripts(["web-socket-js/swfobject.js","web-socket-js/web_socket.js"])}());var b=function(){"use strict";function e(e){return e?{keysym:e,keyname:t?t[e]:e}:void 0}var t=null,r={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:960,257:992,258:451,259:483,260:417,261:433,262:454,263:486,264:710,265:742,266:709,267:741,268:456,269:488,270:463,271:495,272:464,273:496,274:938,275:954,278:972,279:1004,280:458,281:490,282:460,283:492,284:728,285:760,286:683,287:699,288:725,289:757,290:939,291:955,292:678,293:694,294:673,295:689,296:933,297:949,298:975,299:1007,300:16777516,301:16777517,302:967,303:999,304:681,305:697,308:684,309:700,310:979,311:1011,312:930,313:453,314:485,315:934,316:950,317:421,318:437,321:419,322:435,323:465,324:497,325:977,326:1009,327:466,328:498,330:957,331:959,332:978,333:1010,336:469,337:501,338:5052,339:5053,340:448,341:480,342:931,343:947,344:472,345:504,346:422,347:438,348:734,349:766,350:426,351:442,352:425,353:441,354:478,355:510,356:427,357:443,358:940,359:956,360:989,361:1021,362:990,363:1022,364:733,365:765,366:473,367:505,368:475,369:507,370:985,371:1017,372:16777588,373:16777589,374:16777590,375:16777591,376:5054,377:428,378:444,379:431,380:447,381:430,382:446,399:16777615,402:2294,415:16777631,416:16777632,417:16777633,431:16777647,432:16777648,437:16777653,438:16777654,439:16777655,466:16777681,486:16777702,487:16777703,601:16777817,629:16777845,658:16777874,711:439,728:418,729:511,731:434,733:445,901:1966,902:1953,904:1954,905:1955,906:1956,908:1959,910:1960,911:1963,912:1974,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2e3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,938:1957,939:1961,940:1969,941:1970,942:1971,943:1972,944:1978,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,962:2035,963:2034,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,970:1973,971:1977,972:1975,973:1976,974:1979,1025:1715,1026:1713,1027:1714,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1040:1761,1041:1762,1042:1783,1043:1767,1044:1764,1045:1765,1046:1782,1047:1786,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1056:1778,1057:1779,1058:1780,1059:1781,1060:1766,1061:1768,1062:1763,1063:1790,1064:1787,1065:1789,1066:1791,1067:1785,1068:1784,1069:1788,1070:1760,1071:1777,1072:1729,1073:1730,1074:1751,1075:1735,1076:1732,1077:1733,1078:1750,1079:1754,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1088:1746,1089:1747,1090:1748,1091:1749,1092:1734,1093:1736,1094:1731,1095:1758,1096:1755,1097:1757,1098:1759,1099:1753,1100:1752,1101:1756,1102:1728,1103:1745,1105:1699,1106:1697,1107:1698,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,1168:1725,1169:1709,1170:16778386,1171:16778387,1174:16778390,1175:16778391,1178:16778394,1179:16778395,1180:16778396,1181:16778397,1186:16778402,1187:16778403,1198:16778414,1199:16778415,1200:16778416,1201:16778417,1202:16778418,1203:16778419,1206:16778422,1207:16778423,1208:16778424,1209:16778425,1210:16778426,1211:16778427,1240:16778456,1241:16778457,1250:16778466,1251:16778467,1256:16778472,1257:16778473,1262:16778478,1263:16778479,1329:16778545,1330:16778546,1331:16778547,1332:16778548,1333:16778549,1334:16778550,1335:16778551,1336:16778552,1337:16778553,1338:16778554,1339:16778555,1340:16778556,1341:16778557,1342:16778558,1343:16778559,1344:16778560,1345:16778561,1346:16778562,1347:16778563,1348:16778564,1349:16778565,1350:16778566,1351:16778567,1352:16778568,1353:16778569,1354:16778570,1355:16778571,1356:16778572,1357:16778573,1358:16778574,1359:16778575,1360:16778576,1361:16778577,1362:16778578,1363:16778579,1364:16778580,1365:16778581,1366:16778582,1370:16778586,1371:16778587,1372:16778588,1373:16778589,1374:16778590,1377:16778593,1378:16778594,1379:16778595,1380:16778596,1381:16778597,1382:16778598,1383:16778599,1384:16778600,1385:16778601,1386:16778602,1387:16778603,1388:16778604,1389:16778605,1390:16778606,1391:16778607,1392:16778608,1393:16778609,1394:16778610,1395:16778611,1396:16778612,1397:16778613,1398:16778614,1399:16778615,1400:16778616,1401:16778617,1402:16778618,1403:16778619,1404:16778620,1405:16778621,1406:16778622,1407:16778623,1408:16778624,1409:16778625,1410:16778626,1411:16778627,1412:16778628,1413:16778629,1414:16778630,1415:16778631,1417:16778633,1418:16778634,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1619:16778835,1620:16778836,1621:16778837,1632:16778848,1633:16778849,1634:16778850,1635:16778851,1636:16778852,1637:16778853,1638:16778854,1639:16778855,1640:16778856,1641:16778857,1642:16778858,1648:16778864,1657:16778873,1662:16778878,1670:16778886,1672:16778888,1681:16778897,1688:16778904,1700:16778916,1705:16778921,1711:16778927,1722:16778938,1726:16778942,1729:16778945,1740:16778956,1746:16778962,1748:16778964,1776:16778992,1777:16778993,1778:16778994,1779:16778995,1780:16778996,1781:16778997,1782:16778998,1783:16778999,1784:16779e3,1785:16779001,3458:16780674,3459:16780675,3461:16780677,3462:16780678,3463:16780679,3464:16780680,3465:16780681,3466:16780682,3467:16780683,3468:16780684,3469:16780685,3470:16780686,3471:16780687,3472:16780688,3473:16780689,3474:16780690,3475:16780691,3476:16780692,3477:16780693,3478:16780694,3482:16780698,3483:16780699,3484:16780700,3485:16780701,3486:16780702,3487:16780703,3488:16780704,3489:16780705,3490:16780706,3491:16780707,3492:16780708,3493:16780709,3494:16780710,3495:16780711,3496:16780712,3497:16780713,3498:16780714,3499:16780715,3500:16780716,3501:16780717,3502:16780718,3503:16780719,3504:16780720,3505:16780721,3507:16780723,3508:16780724,3509:16780725,3510:16780726,3511:16780727,3512:16780728,3513:16780729,3514:16780730,3515:16780731,3517:16780733,3520:16780736,3521:16780737,3522:16780738,3523:16780739,3524:16780740,3525:16780741,3526:16780742,3530:16780746,3535:16780751,3536:16780752,3537:16780753,3538:16780754,3539:16780755,3540:16780756,3542:16780758,3544:16780760,3545:16780761,3546:16780762,3547:16780763,3548:16780764,3549:16780765,3550:16780766,3551:16780767,3570:16780786,3571:16780787,3572:16780788,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,4304:16781520,4305:16781521,4306:16781522,4307:16781523,4308:16781524,4309:16781525,4310:16781526,4311:16781527,4312:16781528,4313:16781529,4314:16781530,4315:16781531,4316:16781532,4317:16781533,4318:16781534,4319:16781535,4320:16781536,4321:16781537,4322:16781538,4323:16781539,4324:16781540,4325:16781541,4326:16781542,4327:16781543,4328:16781544,4329:16781545,4330:16781546,4331:16781547,4332:16781548,4333:16781549,4334:16781550,4335:16781551,4336:16781552,4337:16781553,4338:16781554,4339:16781555,4340:16781556,4341:16781557,4342:16781558,7682:16784898,7683:16784899,7690:16784906,7691:16784907,7710:16784926,7711:16784927,7734:16784950,7735:16784951,7744:16784960,7745:16784961,7766:16784982,7767:16784983,7776:16784992,7777:16784993,7786:16785002,7787:16785003,7808:16785024,7809:16785025,7810:16785026,7811:16785027,7812:16785028,7813:16785029,7818:16785034,7819:16785035,7840:16785056,7841:16785057,7842:16785058,7843:16785059,7844:16785060,7845:16785061,7846:16785062,7847:16785063,7848:16785064,7849:16785065,7850:16785066,7851:16785067,7852:16785068,7853:16785069,7854:16785070,7855:16785071,7856:16785072,7857:16785073,7858:16785074,7859:16785075,7860:16785076,7861:16785077,7862:16785078,7863:16785079,7864:16785080,7865:16785081,7866:16785082,7867:16785083,7868:16785084,7869:16785085,7870:16785086,7871:16785087,7872:16785088,7873:16785089,7874:16785090,7875:16785091,7876:16785092,7877:16785093,7878:16785094,7879:16785095,7880:16785096,7881:16785097,7882:16785098,7883:16785099,7884:16785100,7885:16785101,7886:16785102,7887:16785103,7888:16785104,7889:16785105,7890:16785106,7891:16785107,7892:16785108,7893:16785109,7894:16785110,7895:16785111,7896:16785112,7897:16785113,7898:16785114,7899:16785115,7900:16785116,7901:16785117,7902:16785118,7903:16785119,7904:16785120,7905:16785121,7906:16785122,7907:16785123,7908:16785124,7909:16785125,7910:16785126,7911:16785127,7912:16785128,7913:16785129,7914:16785130,7915:16785131,7916:16785132,7917:16785133,7918:16785134,7919:16785135,7920:16785136,7921:16785137,7922:16785138,7923:16785139,7924:16785140,7925:16785141,7926:16785142,7927:16785143,7928:16785144,7929:16785145,8194:2722,8195:2721,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8210:2747,8211:2730,8212:2729,8213:1967,8215:3295,8216:2768,8217:2769,8218:2813,8220:2770,8221:2771,8222:2814,8224:2801,8225:2802,8226:2790,8229:2735,8230:2734,8240:2773,8242:2774,8243:2775,8248:2812,8254:1150,8304:16785520,8308:16785524,8309:16785525,8310:16785526,8311:16785527,8312:16785528,8313:16785529,8320:16785536,8321:16785537,8322:16785538,8323:16785539,8324:16785540,8325:16785541,8326:16785542,8327:16785543,8328:16785544,8329:16785545,8352:16785568,8353:16785569,8354:16785570,8355:16785571,8356:16785572,8357:16785573,8358:16785574,8359:16785575,8360:16785576,8361:3839,8362:16785578,8363:16785579,8364:8364,8453:2744,8470:1712,8471:2811,8478:2772,8482:2761,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8539:2755,8540:2756,8541:2757,8542:2758,8592:2299,8593:2300,8594:2301,8595:2302,8658:2254,8660:2253,8706:2287,8709:16785925,8711:2245,8712:16785928,8713:16785929,8715:16785931,8728:3018,8730:2262,8731:16785947,8732:16785948,8733:2241,8734:2242,8743:2270,8744:2271,8745:2268,8746:2269,8747:2239,8748:16785964,8749:16785965,8756:2240,8757:16785973,8764:2248,8771:2249,8773:16785992,8775:16785991,8800:2237,8801:2255,8802:16786018,8803:16786019,8804:2236,8805:2238,8834:2266,8835:2267,8866:3068,8867:3036,8868:3010,8869:3022,8968:3027,8970:3012,8981:2810,8992:2212,8993:2213,9109:3020,9115:2219,9117:2220,9118:2221,9120:2222,9121:2215,9123:2216,9124:2217,9126:2218,9128:2223,9132:2224,9143:2209,9146:2543,9147:2544,9148:2546,9149:2547,9225:2530,9226:2533,9227:2537,9228:2531,9229:2532,9251:2732,9252:2536,9472:2211,9474:2214,9484:2210,9488:2539,9492:2541,9496:2538,9500:2548,9508:2549,9516:2551,9524:2550,9532:2542,9618:2529,9642:2791,9643:2785,9644:2779,9645:2786,9646:2783,9647:2767,9650:2792,9651:2787,9654:2781,9655:2765,9660:2793,9661:2788,9664:2780,9665:2764,9670:2528,9675:2766,9679:2782,9702:2784,9734:2789,9742:2809,9747:2762,9756:2794,9758:2795,9792:2808,9794:2807,9827:2796,9829:2798,9830:2797,9837:2806,9839:2805,10003:2803,10007:2804,10013:2777,10016:2800,10216:2748,10217:2750,10240:16787456,10241:16787457,10242:16787458,10243:16787459,10244:16787460,10245:16787461,10246:16787462,10247:16787463,10248:16787464,10249:16787465,10250:16787466,10251:16787467,10252:16787468,10253:16787469,10254:16787470,10255:16787471,10256:16787472,10257:16787473,10258:16787474,10259:16787475,10260:16787476,10261:16787477,10262:16787478,10263:16787479,10264:16787480,10265:16787481,10266:16787482,10267:16787483,10268:16787484,10269:16787485,10270:16787486,10271:16787487,10272:16787488,10273:16787489,10274:16787490,10275:16787491,10276:16787492,10277:16787493,10278:16787494,10279:16787495,10280:16787496,10281:16787497,10282:16787498,10283:16787499,10284:16787500,10285:16787501,10286:16787502,10287:16787503,10288:16787504,10289:16787505,10290:16787506,10291:16787507,10292:16787508,10293:16787509,10294:16787510,10295:16787511,10296:16787512,10297:16787513,10298:16787514,10299:16787515,10300:16787516,10301:16787517,10302:16787518,10303:16787519,10304:16787520,10305:16787521,10306:16787522,10307:16787523,10308:16787524,10309:16787525,10310:16787526,10311:16787527,10312:16787528,10313:16787529,10314:16787530,10315:16787531,10316:16787532,10317:16787533,10318:16787534,10319:16787535,10320:16787536,10321:16787537,10322:16787538,10323:16787539,10324:16787540,10325:16787541,10326:16787542,10327:16787543,10328:16787544,10329:16787545,10330:16787546,10331:16787547,10332:16787548,10333:16787549,10334:16787550,10335:16787551,10336:16787552,10337:16787553,10338:16787554,10339:16787555,10340:16787556,10341:16787557,10342:16787558,10343:16787559,10344:16787560,10345:16787561,10346:16787562,10347:16787563,10348:16787564,10349:16787565,10350:16787566,10351:16787567,10352:16787568,10353:16787569,10354:16787570,10355:16787571,10356:16787572,10357:16787573,10358:16787574,10359:16787575,10360:16787576,10361:16787577,10362:16787578,10363:16787579,10364:16787580,10365:16787581,10366:16787582,10367:16787583,10368:16787584,10369:16787585,10370:16787586,10371:16787587,10372:16787588,10373:16787589,10374:16787590,10375:16787591,10376:16787592,10377:16787593,10378:16787594,10379:16787595,10380:16787596,10381:16787597,10382:16787598,10383:16787599,10384:16787600,10385:16787601,10386:16787602,10387:16787603,10388:16787604,10389:16787605,10390:16787606,10391:16787607,10392:16787608,10393:16787609,10394:16787610,10395:16787611,10396:16787612,10397:16787613,10398:16787614,10399:16787615,10400:16787616,10401:16787617,10402:16787618,10403:16787619,10404:16787620,10405:16787621,10406:16787622,10407:16787623,10408:16787624,10409:16787625,10410:16787626,10411:16787627,10412:16787628,10413:16787629,10414:16787630,10415:16787631,10416:16787632,10417:16787633,10418:16787634,10419:16787635,10420:16787636,10421:16787637,10422:16787638,10423:16787639,10424:16787640,10425:16787641,10426:16787642,10427:16787643,10428:16787644,10429:16787645,10430:16787646,10431:16787647,10432:16787648,10433:16787649,10434:16787650,10435:16787651,10436:16787652,10437:16787653,10438:16787654,10439:16787655,10440:16787656,10441:16787657,10442:16787658,10443:16787659,10444:16787660,10445:16787661,10446:16787662,10447:16787663,10448:16787664,10449:16787665,10450:16787666,10451:16787667,10452:16787668,10453:16787669,10454:16787670,10455:16787671,10456:16787672,10457:16787673,10458:16787674,10459:16787675,10460:16787676,10461:16787677,10462:16787678,10463:16787679,10464:16787680,10465:16787681,10466:16787682,10467:16787683,10468:16787684,10469:16787685,10470:16787686,10471:16787687,10472:16787688,10473:16787689,10474:16787690,10475:16787691,10476:16787692,10477:16787693,10478:16787694,10479:16787695,10480:16787696,10481:16787697,10482:16787698,10483:16787699,10484:16787700,10485:16787701,10486:16787702,10487:16787703,10488:16787704,10489:16787705,10490:16787706,10491:16787707,10492:16787708,10493:16787709,10494:16787710,10495:16787711,12289:1188,12290:1185,12300:1186,12301:1187,12443:1246,12444:1247,12449:1191,12450:1201,12451:1192,12452:1202,12453:1193,12454:1203,12455:1194,12456:1204,12457:1195,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12483:1199,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12515:1196,12516:1236,12517:1197,12518:1237,12519:1198,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12530:1190,12531:1245,12539:1189,12540:1200};
return{fromUnicode:function(t){return e(r[t])},lookup:e}}(),m=function(){"use strict";function e(e){var t={536:350,537:351,538:354,539:355},r=t[e];return r?r:e}function t(){return navigator&&!!/mac/i.exec(navigator.platform)}function r(){return navigator&&!!/win/i.exec(navigator.platform)}function n(){return navigator&&!!/linux/i.exec(navigator.platform)}function o(e,t){var r={};for(var n in t)65505!==parseInt(n)&&(r[n]=t[n]);var o=0;for(var s in t)r[s]&&++o;return i(e,r)?o>e.length:o>0}function i(e,t){if(0===e.length)return!1;for(var r=0;r<e.length;++r)if(!t[e[r]])return!1;return!0}function s(e){function s(e,t){function r(e){return{keysym:b.lookup(e),type:y[e]?"keydown":"keyup"}}var n=[];return void 0!==e.ctrlKey&&e.ctrlKey!==y[c]&&t!==c&&(y[c]=e.ctrlKey,n.push(r(c))),void 0!==e.altKey&&e.altKey!==y[l]&&t!==l&&(y[l]=e.altKey,n.push(r(l))),void 0!==e.altGraphKey&&e.altGraphKey!==y[f]&&t!==f&&(y[f]=e.altGraphKey,n.push(r(f))),void 0!==e.shiftKey&&e.shiftKey!==y[d]&&t!==d&&(y[d]=e.shiftKey,n.push(r(d))),void 0!==e.metaKey&&e.metaKey!==y[h]&&t!==h&&(y[h]=e.metaKey,n.push(r(h))),n}function a(e,t){var r=u(e),n=r?r.keysym:null;return null!==n&&void 0!==y[n]&&(y[n]=t),s(e,n)}var c=65507,l=65513,f=65027,d=65505,h=65511;e||(e=t()?[l]:r()?[l,c]:n()?[f]:[]);var y={};return y[c]=!1,y[l]=!1,y[f]=!1,y[d]=!1,y[h]=!1,{keydown:function(e){return a(e,!0)},keyup:function(e){return a(e,!1)},syncAny:function(e){return s(e)},hasShortcutModifier:function(){return o(e,y)},activeCharModifier:function(){return i(e,y)?e:null}}}function a(e){return"keyCode"in e&&"key"in e?e.key+":"+e.keyCode:"keyCode"in e?e.keyCode:e.key}function u(t){var r;if(t.char&&1===t.char.length?r=t.char.charCodeAt():t.charCode?r=t.charCode:t.keyCode&&"keypress"===t.type&&(r=t.keyCode),r){var n=b.fromUnicode(e(r));if(n)return n}return t.keyCode?b.lookup(c(t.keyCode,t.shiftKey)):t.which?b.lookup(c(t.which,t.shiftKey)):null}function c(e,t){if("number"!=typeof e)return null;if(e>=48&&57>=e)return e;if(e>=65&&90>=e)return t?e:e+32;if(e>=96&&105>=e)return 65456+(e-96);switch(e){case 32:return 32;case 106:return 65450;case 107:return 65451;case 108:return 65452;case 109:return 65453;case 110:return 65454;case 111:return 65455;case 187:return 43;case 188:return 44;case 189:return 45;case 190:return 46}return l({keyCode:e})}function l(e){if(!e.keyCode)return null;var t=e.keyCode;if(t>=112&&135>=t)return 65470+t-112;switch(t){case 8:return 65288;case 13:return 65293;case 9:return 65289;case 27:return 65307;case 46:return 65535;case 36:return 65360;case 35:return 65367;case 33:return 65365;case 34:return 65366;case 45:return 65379;case 37:return 65361;case 38:return 65362;case 39:return 65363;case 40:return 65364;case 16:return 65505;case 17:return 65507;case 18:return 65513;case 224:return 65031;case 225:return 65027;case 91:return 65516;case 92:return 65517;case 93:return 65383;default:return null}}return{hasShortcutModifier:o,hasCharModifier:i,ModifierSync:s,getKey:a,getKeysym:u,keysymFromKeyCode:c,nonCharacterKey:l,substituteCodepoint:e}}();return{RFB:d,WebUtil:p}}(window);